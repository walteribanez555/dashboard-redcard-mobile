"use strict";(self.webpackChunkdashboard_mobile=self.webpackChunkdashboard_mobile||[]).push([[734],{4734:(vi,le,u)=>{u.r(le),u.d(le,{DashboardModule:()=>pi});var $=u(3030),l=u(177),e=u(3953);let xe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-dashboard"]],standalone:!0,features:[e.aNF],decls:1,vars:0,template:function(i,o){1&i&&e.nrm(0,"router-outlet")},dependencies:[l.MD,$.iI,$.n3],encapsulation:2})}return n})();var O=u(467);let we=(()=>{class n{constructor(){this.onAddServiceToggle=new e.bkB}ngOnInit(){}onAddToggle(){this.onAddServiceToggle.emit()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-service-mobile-header"]],outputs:{onAddServiceToggle:"onAddServiceToggle"},standalone:!0,features:[e.aNF],decls:12,vars:0,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"],[1,"flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-medium","text-primary-foreground",3,"click"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"h3",2),e.EFF(3,"Planes"),e.k0s(),e.j41(4,"div",3)(5,"a",4),e.EFF(6,"Lista"),e.k0s(),e.j41(7,"span"),e.EFF(8," - Planes"),e.k0s()()(),e.j41(9,"div",5)(10,"button",6),e.bIt("click",function(){return o.onAddToggle()}),e.EFF(11," Agregar Detalle de Plan "),e.k0s()()())},dependencies:[l.MD],encapsulation:2})}return n})();const _e=["item-list-service-mobile",""];let Fe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["","item-list-service-mobile",""]],inputs:{serviceItem:"serviceItem"},standalone:!0,features:[e.aNF],attrs:_e,decls:12,vars:4,consts:[[1,"py-3","pl-3","text-start"],[1,"text-sm","text-muted-foreground"],[1,"pr-1"],[1,"py-3","pl-3","text-right"],[1,"p-2","text-sm","text-muted-foreground",3,"ngClass"]],template:function(i,o){1&i&&(e.j41(0,"td",0)(1,"div")(2,"span",1),e.EFF(3),e.k0s()()(),e.j41(4,"td",0)(5,"div",2)(6,"span",1),e.EFF(7),e.k0s()()(),e.j41(8,"td",3)(9,"div",2)(10,"span",4),e.EFF(11),e.k0s()()()),2&i&&(e.R7$(3),e.JRh(o.serviceItem.service.servicio),e.R7$(4),e.JRh(o.serviceItem.description),e.R7$(3),e.Y8G("ngClass",1==o.serviceItem.status.id?"border border-green-800 items-end w-fit rounded-md ":"border border-red-800  items-end w-fit rounded-md "),e.R7$(),e.JRh(o.serviceItem.status.title))},dependencies:[l.MD,l.YU],encapsulation:2})}return n})();var j=u(8606);function ke(n,a){if(1&n){const t=e.RV6();e.j41(0,"tr",16),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.onSelectItem(o))}),e.k0s()}2&n&&e.Y8G("serviceItem",a.$implicit)}function Ce(n,a){1&n&&(e.j41(0,"div",17),e.nrm(1,"svg-icon",18),e.k0s())}let ye=(()=>{class n{constructor(){this.listServices=[],this.isLoading=!0,this.onSelectService=new e.bkB}onSelectItem(t){this.onSelectService.emit(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-list-service-mobile"]],inputs:{listServices:"listServices",isLoading:"isLoading"},outputs:{onSelectService:"onSelectService"},standalone:!0,features:[e.aNF],decls:24,vars:2,consts:[[1,"flex-col","rounded-lg","bg-background","px-8","py-8","sm:flex-row"],[1,"border-dashed","border-border"],[1,"w-full","flex","flex-col","p-2","gap-2"],[1,"flex","flex-row","items-center","justify-between","w-full"],[1,"w-1/2"],[1,"flex","flex-row","gap-2"],[1,"w-full"],[1,"text-muted-foreground","text-sm"],["type","text","placeholder","RED MUNDIAL VIP",1,"w-full","border","border-border","rounded-lg","p-2"],[1,"relative","overflow-x-auto","p-2","h-72","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","overflow-auto","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted"],[1,"w-full","table-auto"],[1,"text-xs","uppercase","text-muted-foreground","sticky","top-0","bg-background"],[1,"py-3","text-left"],[1,"py-3","text-right"],["item-list-service-mobile","","class","border-b border-dashed border-border hover:bg-card cursor-pointer",3,"serviceItem","click",4,"ngFor","ngForOf"],["class","absolute inset-0 flex items-center justify-center bg-slate-800 bg-opacity-50",4,"ngIf"],["item-list-service-mobile","",1,"border-b","border-dashed","border-border","hover:bg-card","cursor-pointer",3,"click","serviceItem"],[1,"absolute","inset-0","flex","items-center","justify-center","bg-slate-800","bg-opacity-50"],["src","assets/icons/loading.svg","svgClass","h-12 w-12 text-primary"]],template:function(i,o){1&i&&(e.j41(0,"div",0),e.nrm(1,"hr",1),e.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),e.EFF(8,"Planes"),e.k0s(),e.nrm(9,"input",8),e.k0s()()()()(),e.nrm(10,"hr",1),e.j41(11,"div",9)(12,"table",10)(13,"thead",11)(14,"tr")(15,"th",12),e.EFF(16,"Plan"),e.k0s(),e.j41(17,"th",12),e.EFF(18,"Descripcion"),e.k0s(),e.j41(19,"th",13),e.EFF(20,"Status"),e.k0s()()(),e.j41(21,"tbody"),e.DNE(22,ke,1,1,"tr",14),e.k0s()(),e.DNE(23,Ce,2,0,"div",15),e.k0s()()),2&i&&(e.R7$(22),e.Y8G("ngForOf",o.listServices),e.R7$(),e.Y8G("ngIf",o.isLoading))},dependencies:[l.MD,l.Sq,l.bT,Fe,j.DM],encapsulation:2})}return n})();var v=u(5558),I=u(7673),V=u(1626),D=u(5312);let Ie=(()=>{class n{constructor(){this.apiMobile=D.c.apiMobile+"/services",this.http=(0,e.WQX)(V.Qq)}getServices(){return this.http.get(this.apiMobile)}getServiceById(t){return this.http.get(`${this.apiMobile}?id=${t}`)}createService(t){return this.http.post(this.apiMobile,t)}updateService(t){return this.http.put(`${this.apiMobile}?id=${t.id||t.service_id}`,t).pipe((0,v.n)(()=>(0,I.of)(t)))}deleteService(t){return this.http.delete(`${this.apiMobile}?id=${t}`)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),h=(()=>{class n{constructor(t){this.viewContainerRef=t}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(e.c1b))};static#t=this.\u0275dir=e.FsC({type:n,selectors:[["","dcWrapper",""]],standalone:!0})}return n})();var r=u(9417);const Se=["inputFile"];function je(n,a){if(1&n&&e.nrm(0,"img",6),2&n){const t=e.XpG();e.Y8G("src",t.imgBase64,e.B4B)}}let ce=(()=>{class n{constructor(){this.isDisabled=!1,this.cdr=(0,e.WQX)(e.gRc),this.fileName="Agregar Archivo",this.imgBase64=null,this.file=null}ngOnInit(){}writeValue(t){this.file=t,t&&(this.fileName=t.name,this.setImageToView(t)),this.cdr.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.isDisabled=t}changeValue(t){this.file=t,this.onTouched?.(),this.onChange?.(t),this.cdr.detectChanges()}onClickInputWrapper(){this.isDisabled||(this.inputFile.nativeElement.click(),this.cdr.detectChanges())}onChangeFile(t){let i=t.target.files[0];this.fileName=i.name,i&&this.setImageToView(i),this.changeValue(i),this.cdr.detectChanges()}setImageToView(t){let i=new FileReader;i.readAsDataURL(t),i.onload=()=>{this.imgBase64=i.result},i.onloadend=()=>{this.cdr.detectChanges()}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-file-input"]],viewQuery:function(i,o){if(1&i&&e.GBs(Se,5),2&i){let s;e.mGM(s=e.lsd())&&(o.inputFile=s.first)}},standalone:!0,features:[e.Jv_([{provide:r.kq,useExisting:(0,e.Rfq)(()=>n),multi:!0}]),e.aNF],decls:8,vars:2,consts:[["inputFile",""],[1,"flex","flex-col","gap-2"],["alt","image","class","image",3,"src",4,"ngIf"],[1,"wrapper",3,"click"],["type","file","name","file","hidden","",1,"file-input",3,"change"],[1,"fas","fa-cloud-upload-alt"],["alt","image",1,"image",3,"src"]],template:function(i,o){if(1&i){const s=e.RV6();e.j41(0,"div",1),e.DNE(1,je,1,1,"img",2),e.j41(2,"div",3),e.bIt("click",function(){return e.eBV(s),e.Njj(o.onClickInputWrapper())}),e.j41(3,"header"),e.EFF(4),e.k0s(),e.j41(5,"input",4,0),e.bIt("change",function(d){return e.eBV(s),e.Njj(o.onChangeFile(d))}),e.k0s(),e.nrm(7,"i",5),e.k0s()()}2&i&&(e.R7$(),e.Y8G("ngIf",o.imgBase64),e.R7$(3),e.JRh(o.fileName))},dependencies:[l.MD,l.bT],styles:["[_ngcontent-%COMP%]::selection{color:#fff;background:#6990f2}.wrapper[_ngcontent-%COMP%]{width:100%;border-radius:.375rem;border-width:1px;border-color:hsl(var(--border));background-color:hsl(var(--background));padding:.75rem;font-size:.75rem;line-height:1rem;color:hsl(var(--foreground))}.wrapper[_ngcontent-%COMP%]::placeholder{color:hsl(var(--muted-foreground))}.wrapper[_ngcontent-%COMP%]:focus{z-index:10;border-color:hsl(var(--primary));outline:2px solid transparent;outline-offset:2px;--tw-ring-color: hsl(var(--primary))}header[_ngcontent-%COMP%]{text-align:center}section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-bottom:10px;list-style:none;padding:15px 20px;border-radius:5px;display:flex;align-items:center;justify-content:space-between}section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px}section[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}"]})}return n})();var G=u(1413);let Me=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-item-list"]],inputs:{id:"id",name:"name"},standalone:!0,features:[e.aNF],decls:3,vars:1,consts:[[1,"flex","flex-col","items-start","p-2","rounded-md","hover:bg-muted","hover:cursor-pointer"],[1,"text-sm","text-foreground"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"span",1),e.EFF(2),e.k0s()()),2&i&&(e.R7$(2),e.SpI(" ",o.name," "))},dependencies:[l.MD],encapsulation:2})}return n})();function Ee(n,a){if(1&n){const t=e.RV6();e.j41(0,"app-item-list",2),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.onSelect(o))}),e.k0s()}if(2&n){const t=a.$implicit;e.Y8G("name",t.name)("id",t.id)}}let De=(()=>{class n{constructor(){this.isHidden=!1,this.items=[],this.filteredItems=[]}ngOnInit(){this.filteredItems=this.items,this.filterListener?.subscribe({next:t=>{this.filterItems(t)}})}filterItems(t){this.filteredItems=this.items.filter(i=>i.name.toLowerCase().startsWith(t.toLowerCase()))}onSelect(t){this.onSelectItem(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-listview"]],inputs:{isHidden:"isHidden",onSelectItem:"onSelectItem",items:"items",filterListener:"filterListener"},standalone:!0,features:[e.aNF],decls:2,vars:2,consts:[[3,"ngClass"],[3,"name","id","click",4,"ngFor","ngForOf"],[3,"click","name","id"]],template:function(i,o){1&i&&(e.j41(0,"div",0),e.DNE(1,Ee,1,2,"app-item-list",1),e.k0s()),2&i&&(e.Y8G("ngClass",o.isHidden?" hidden":" mt-2 absolute z-10 bg-background shadow-lg rounded-md w-full border border-muted max-h-32 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted"),e.R7$(),e.Y8G("ngForOf",o.filteredItems))},dependencies:[l.MD,l.YU,l.Sq,Me],encapsulation:2})}return n})();function Te(n,a){if(1&n&&(e.qex(0),e.j41(1,"div",5),e.nrm(2,"app-listview",6),e.k0s(),e.bVm()),2&n){const t=e.XpG();e.R7$(2),e.Y8G("items",t.items)("isHidden",t.isHidden)("onSelectItem",t.onSelectItem)("filterListener",t.searchTerm$)}}let Y=(()=>{class n{constructor(){this.value=null,this.isDisabled=!1,this.isHidden=!0,this.cdr=(0,e.WQX)(e.gRc),this.searchTerm$=new G.B,this.withFilter=!1,this.isToggle=!1,this.searchInput="Select",this.searchText="1",this.onSelectItem=t=>{this.searchInput=t.name,this.changeValue(t.id),this.updateToggle()}}writeValue(t){this.value=t,this.searchInput=this.items.find(i=>i.id==t)?.name||"Select item",this.value?console.log("Hay valor ",this.value):(console.log("No hay valor ",this.value),console.log("Items ",this.items)),this.cdr.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.isDisabled=t}changeValue(t){this.value=t,this.searchInput=this.items.find(i=>i.id==t)?.name||"Select item",this.onTouched?.(),this.onChange?.(t)}ngOnInit(){}ngAfterViewInit(){}searchTerm(t){t.target.value&&this.searchTerm$.next(t.target.value)}updateToggle(){const t=this.isHidden;this.isToggle=!this.isToggle,this.isHidden=!t,this.cdr.detectChanges()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-select"]],inputs:{items:"items",withFilter:"withFilter"},standalone:!0,features:[e.Jv_([{provide:r.kq,useExisting:(0,e.Rfq)(()=>n),multi:!0}]),e.aNF],decls:6,vars:4,consts:[[1,"flex","flex-col","relative"],[1,"flex","items-start","hover:bg-card","p-2","border-muted","rounded-md","relative",3,"click","ngClass"],[1,"text-sm","text-foreground"],["src","assets/icons/heroicons/outline/bars-arrow-down.svg",3,"svgClass"],[4,"ngIf"],[1,"content"],[3,"items","isHidden","onSelectItem","filterListener"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1),e.bIt("click",function(){return o.updateToggle()}),e.j41(2,"span",2),e.EFF(3),e.k0s(),e.nrm(4,"svg-icon",3),e.k0s(),e.DNE(5,Te,3,4,"ng-container",4),e.k0s()),2&i&&(e.R7$(),e.Y8G("ngClass",o.isHidden?"border  ":" border-2 border-primary "),e.R7$(2),e.JRh(o.searchInput),e.R7$(),e.Y8G("svgClass","h-6 w-6 absolute right-2 text-foreground"),e.R7$(),e.Y8G("ngIf",o.isToggle))},dependencies:[l.MD,l.YU,l.bT,De,r.YN,j.DM],encapsulation:2})}return n})();function Q(n,a){return z.apply(this,arguments)}function z(){return(z=(0,O.A)(function*(n,a){const i=yield(yield fetch(n)).blob();return new File([i],a,{type:i.type})})).apply(this,arguments)}function Re(n,a){if(1&n){const t=e.RV6();e.j41(0,"form",1),e.bIt("ngSubmit",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onSubmit())}),e.j41(1,"div",2)(2,"div",3)(3,"span",4),e.EFF(4),e.k0s(),e.j41(5,"button",5),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.close())}),e.EFF(6," X "),e.k0s()(),e.nrm(7,"hr",6),e.k0s(),e.j41(8,"div",7),e.nrm(9,"div",8),e.j41(10,"div",7)(11,"div",9)(12,"span",10),e.EFF(13,"Plan"),e.k0s(),e.nrm(14,"app-select",11),e.k0s()(),e.nrm(15,"hr",6),e.j41(16,"div",7)(17,"div",9)(18,"span",10),e.EFF(19,"Descripcion"),e.k0s(),e.nrm(20,"input",12),e.k0s()(),e.nrm(21,"hr",6),e.j41(22,"div",7)(23,"div",9)(24,"span",10),e.EFF(25,"Estado"),e.k0s(),e.nrm(26,"app-select",13),e.k0s()(),e.nrm(27,"hr",6),e.j41(28,"div",7)(29,"div",9)(30,"span",10),e.EFF(31,"Imagen"),e.k0s(),e.nrm(32,"app-file-input",14),e.k0s()(),e.nrm(33,"hr",6),e.j41(34,"div",15)(35,"button",16),e.EFF(36," Guardar Cambios "),e.k0s(),e.nrm(37,"hr"),e.j41(38,"button",17),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onDelete())}),e.EFF(39," Eliminar "),e.k0s()()()()}if(2&n){const t=e.XpG();e.Y8G("formGroup",t.formDetails),e.R7$(4),e.JRh("Detalles del Plan"),e.R7$(10),e.Y8G("items",t.data.items),e.R7$(12),e.Y8G("items",t.items)}}let Le=(()=>{class n{constructor(){this.cdr=(0,e.WQX)(e.gRc),this.items=[{id:1,name:"Activo"},{id:2,name:"Inactivo"}],this.formDetails=null}ngAfterViewInit(){Q(this.service.img_url,this.service.description).then(t=>{this.formDetails=new r.gE({id:new r.MJ(this.service.service_id||this.service.id),plan:new r.MJ(this.service.service.servicio_id),description:new r.MJ(this.service.description),image:new r.MJ(t),status:new r.MJ(this.service.status.id)})})}ngOnInit(){this.cdr.detectChanges()}close(){this.detailListener.close()}onSubmit(){this.detailListener.submit(this.formDetails)}onDelete(){this.detailListener.delete(this.service.id||this.service.service_id)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-service-mobile-detail"]],inputs:{detailListener:"detailListener",service:"service",data:"data"},standalone:!0,features:[e.aNF],decls:1,vars:1,consts:[["class","flex   w-screen  md:w-96 bg-background h-full overflow-auto gap-2  px-3 flex-col scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted",3,"formGroup","ngSubmit",4,"ngIf"],[1,"flex","w-screen","md:w-96","bg-background","h-full","overflow-auto","gap-2","px-3","flex-col","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted",3,"ngSubmit","formGroup"],[1,"sticky","z-10","top-0","flex","flex-col","bg-background"],[1,"flex","relative","flex-row","items-center","gap-2","py-3","justify-start"],[1,"text-lg","text-foreground"],[1,"absolute","cursor-pointer","right-0","inline-flex","w-fit","justify-center","rounded-md","bg-background","px-3","py-2","text-sm","font-semibold","text-foreground","shadow-sm","ring-1","ring-inset","ring-foreground","hover:bg-card","sm:mt-0","sm:w-fit",3,"click"],[1,"border-dashed","border-border"],[1,"flex","py-2","flex-col"],[1,"px-2","flex-col","flex"],[1,"px-2","flex-col","flex","gap-2"],[1,"text-xs","text-muted-foreground"],["formControlName","plan",3,"items"],["formControlName","description","type","text","placeholder","Enlace general con detalles precisos"],["formControlName","status",3,"items"],["formControlName","image"],[1,"flex","py-2","flex-col","gap-2"],["type","submit",1,"bg-primary","text-white","rounded-md","p-2"],["type","button",1,"bg-red-500","text-white","rounded-md","p-2",3,"click"]],template:function(i,o){1&i&&e.DNE(0,Re,40,4,"form",0),2&i&&e.Y8G("ngIf",o.formDetails)},dependencies:[l.MD,l.bT,ce,r.X1,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,r.YN,Y],encapsulation:2})}return n})();var k=function(n){return n.Create="Create",n.Read="Read",n.Update="Update",n.Delete="Delete",n}(k||{});const de=["*","*"];function Ne(n,a){}function Ae(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2).$implicit,s=e.XpG();return e.Njj(s.submit(o))}),e.EFF(1),e.k0s()}if(2&n){const t=e.XpG(2).$implicit;e.R7$(),e.JRh(t.title)}}function Ge(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",23),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2).$implicit,s=e.XpG();return e.Njj(s.submit(o))}),e.EFF(1),e.k0s()}if(2&n){const t=e.XpG(2).$implicit;e.R7$(),e.JRh(t.title)}}function Be(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",24),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2).$implicit,s=e.XpG();return e.Njj(s.submit(o))}),e.EFF(1),e.k0s()}if(2&n){const t=e.XpG(2).$implicit;e.R7$(),e.JRh(t.title)}}function $e(n,a){if(1&n&&e.DNE(0,Ae,2,1,"button",19)(1,Ge,2,1,"button",20)(2,Be,2,1,"button",21),2&n){const t=e.XpG().$implicit,i=e.XpG();e.Y8G("ngIf",t.action==i.create&&(null==i.forms||i.actualStep==i.forms.length-1)),e.R7$(),e.Y8G("ngIf",t.action==i.edit&&(null==i.forms||i.actualStep==i.forms.length-1)),e.R7$(),e.Y8G("ngIf",t.action==i.delete&&(null==i.forms||i.actualStep==i.forms.length-1))}}function Oe(n,a){1&n&&e.SdG(0,0,["*ngFor","let action of actions"],$e,3,3)}function Ve(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",27),e.bIt("click",function(){e.eBV(t);const o=e.XpG(4);return e.Njj(o.toggleNext())}),e.EFF(1," Siguiente Paso "),e.k0s()}}function Ye(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",26)(1,"button",27),e.bIt("click",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.togglePrev())}),e.EFF(2," Paso Previo "),e.k0s(),e.DNE(3,Ve,2,0,"button",28),e.k0s()}if(2&n){const t=e.XpG(3);e.R7$(3),e.Y8G("ngIf",t.actualStep!=t.forms.length-1)}}function Ue(n,a){if(1&n&&e.DNE(0,Ye,4,1,"div",25),2&n){const t=e.XpG(2);e.Y8G("ngIf",t.forms.length>1)}}function Xe(n,a){1&n&&e.SdG(0,1,["*ngIf","forms && forms.length > 0  "],Ue,1,1)}let Pe=(()=>{class n{constructor(t,i){this.elementRef=t,this.iconRegistry=i,this.delete=k.Delete,this.edit=k.Update,this.create=k.Create,this.actualStep=0,this.title="Agregar Elemento",this.iconPath="assets/icons/heroicons/outline/plus.svg",this.size="md",this.actions=[{action:k.Create,title:"Agregar"}],this.closeEvent=new e.bkB,this.submitEvent=new e.bkB,this.cdr=(0,e.WQX)(e.gRc)}ngOnInit(){}close(){this.elementRef.nativeElement.remove(),this.closeEvent.emit()}submit(t){this.elementRef.nativeElement.remove(),this.submitEvent.emit({form:this.forms,data:this.data,action:t})}ngAfterViewInit(){this.cdr.detectChanges(),this.loadComponent()}loadComponent(){const t=this.dcWrapper.viewContainerRef;t.clear();const i=t.createComponent(this.component);i.instance.forms=this.forms,i.instance.data=this.data,i.instance.onCreateModal?.subscribe({next:o=>{this.listenerFromChild=o}}),this.cdr.detectChanges()}toggleNext(){const{actualStep:i}=this.listenerFromChild?.onNext();this.actualStep=i,this.cdr.detectChanges()}togglePrev(){const{actualStep:i}=this.listenerFromChild?.onPrev();this.actualStep=i,this.cdr.detectChanges()}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(e.aKT),e.rXU(j.it))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-modal"]],viewQuery:function(i,o){if(1&i&&e.GBs(h,5),2&i){let s;e.mGM(s=e.lsd())&&(o.dcWrapper=s.first)}},inputs:{title:"title",iconPath:"iconPath",size:"size",forms:"forms",data:"data",actions:"actions",component:"component"},outputs:{closeEvent:"closeEvent",submitEvent:"submitEvent"},standalone:!0,features:[e.aNF],ngContentSelectors:de,decls:22,vars:4,consts:[["aria-labelledby","modal-title","role","dialog","aria-modal","true",1,"relative","z-10"],["aria-hidden","true",1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity"],[1,"fixed","inset-0","z-10","w-screen","overflow-y-auto"],[1,"flex","min-h-full","items-end","justify-center","p-4","text-center","sm:items-center","sm:p-0"],[1,"relative","w-full","max-w-4xl","transform","overflow-hidden","rounded-lg","bg-card","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:max-w-4xl"],[1,"bg-card","px-2","pb-2","pt-5","sm:p-6","sm:pb-4"],[1,"sm:flex","sm:items-start"],[1,"relative","w-full","mt-3","text-center","sm:ml-4"],[1,"flex","w-full","text-start","flex-row","gap-2","pr-8","items-start","justify-start"],[1,"flex","flex-row","h-6","w-fit","flex-shrink-0","items-center","justify-start","rounded-full","bg-primary","mx-0"],["alt","",1,"h-6","w-6","text-white",3,"src"],["id","modal-title",1,"text-base","leading-6","font-semibold","text-foreground","text-bold"],[1,"absolute","cursor-pointer","right-0","inline-flex","w-fit","justify-center","rounded-md","bg-background","px-3","py-2","text-sm","font-semibold","text-foreground","shadow-sm","ring-1","ring-inset","ring-foreground","hover:bg-card","sm:mt-0","sm:w-fit",3,"click"],[1,"mt-5"],["dcWrapper","","id","item"],[1,"flex","flex-col","bg-background","gap-2","px-4","py-3","sm:flex","md:flex-row-reverse","sm:px-6"],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","button",1,"inline-flex","w-full","justify-center","rounded-md","bg-background","px-3","py-2","text-sm","font-semibold","text-foreground","shadow-sm","ring-1","ring-inset","ring-foreground","hover:bg-card","sm:mt-0","sm:w-auto",3,"click"],["type","button","class","inline-flex w-full justify-center rounded-md bg-primary px-3 py-2 text-sm font-semibold text-primary-foreground  shadow-sm  sm:ml-3 sm:w-auto",3,"click",4,"ngIf"],["type","button","class","inline-flex w-full justify-center rounded-md bg-blue-700 px-3 py-2 text-sm font-semibold text-primary-foreground  shadow-sm  sm:ml-3 sm:w-auto",3,"click",4,"ngIf"],["type","button","class","inline-flex w-full justify-center rounded-md  bg-red-600 px-3 py-2 text-sm font-semibold text-primary-foreground  shadow-sm  sm:ml-3 sm:w-auto",3,"click",4,"ngIf"],["type","button",1,"inline-flex","w-full","justify-center","rounded-md","bg-primary","px-3","py-2","text-sm","font-semibold","text-primary-foreground","shadow-sm","sm:ml-3","sm:w-auto",3,"click"],["type","button",1,"inline-flex","w-full","justify-center","rounded-md","bg-blue-700","px-3","py-2","text-sm","font-semibold","text-primary-foreground","shadow-sm","sm:ml-3","sm:w-auto",3,"click"],["type","button",1,"inline-flex","w-full","justify-center","rounded-md","bg-red-600","px-3","py-2","text-sm","font-semibold","text-primary-foreground","shadow-sm","sm:ml-3","sm:w-auto",3,"click"],["class","flex flex-col-reverse w-full md:flex-row md:w-fit items-center justify-center  gap-1 px-1 ",4,"ngIf"],[1,"flex","flex-col-reverse","w-full","md:flex-row","md:w-fit","items-center","justify-center","gap-1","px-1"],[1,"inline-flex","w-full","justify-center","rounded-md","bg-background","px-3","py-2","text-sm","font-semibold","text-foreground","shadow-sm","ring-1","ring-inset","ring-foreground","hover:bg-card","sm:mt-0","sm:w-auto",3,"click"],["class","inline-flex w-full justify-center rounded-md bg-background px-3 py-2 text-sm font-semibold text-foreground shadow-sm ring-1 ring-inset ring-foreground hover:bg-card sm:mt-0 sm:w-auto ",3,"click",4,"ngIf"]],template:function(i,o){1&i&&(e.NAR(de),e.j41(0,"div",0),e.nrm(1,"div",1),e.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),e.nrm(10,"svg-icon",10),e.k0s(),e.j41(11,"h3",11),e.EFF(12),e.k0s(),e.j41(13,"div",12),e.bIt("click",function(){return o.close()}),e.EFF(14," X "),e.k0s()(),e.j41(15,"div",13),e.DNE(16,Ne,0,0,"ng-template",14),e.k0s()()()(),e.j41(17,"div",15),e.DNE(18,Oe,2,0,"ng-content",16)(19,Xe,2,0,"ng-content",17),e.j41(20,"button",18),e.bIt("click",function(){return o.close()}),e.EFF(21,"Cancelar"),e.k0s()()()()()()),2&i&&(e.R7$(10),e.Y8G("src",o.iconPath),e.R7$(2),e.JRh(o.title),e.R7$(6),e.Y8G("ngForOf",o.actions),e.R7$(),e.Y8G("ngIf",o.forms&&o.forms.length>0))},dependencies:[l.MD,l.Sq,l.bT,j.DM,h],encapsulation:2})}return n})(),U=(()=>{class n{constructor(t,i,o){this.resolver=t,this.injector=i,this.document=o}open(t,i){const s=this.resolver.resolveComponentFactory(Pe).create(this.injector),c=s.instance;return c.title=i?.title,c.size=i?.size||"md",c.forms=i.forms,c.data=i.data,c.iconPath=i?.icon||"assets/icons/heroicons/outline/plus.svg",c.actions=i?.actions||[{action:k.Create,title:"Realizar"}],this.resolver.resolveComponentFactory(t).create(this.injector),c.component=t,c.closeEvent.subscribe(()=>{this.closeModal()}),c.submitEvent.subscribe(p=>{this.submitModal(p)}),s.hostView.detectChanges(),this.document.body.appendChild(s.location.nativeElement),s.hostView.detectChanges(),this.modalNotifier=new G.B,this.modalNotifier.asObservable()}closeModal(){this.modalNotifier?.complete()}submitModal(t){this.modalNotifier?.next(t),this.closeModal()}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(e.OM3),e.KVO(e.zZn),e.KVO(l.qQ))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),C=(()=>{class n{constructor(){this.validators=[]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-input-text"]],inputs:{formControl:"formControl",data:"data",validators:"validators"},standalone:!0,features:[e.aNF],decls:1,vars:2,consts:[["type","text",3,"formControl","placeholder"]],template:function(i,o){1&i&&e.nrm(0,"input",0),2&i&&e.Y8G("formControl",o.formControl)("placeholder",o.data.placeholder)},dependencies:[l.MD,r.YN,r.me,r.BC,r.X1,r.l_],encapsulation:2})}return n})();function We(n,a){}let Je=(()=>{class n{constructor(){this.titleField=null,this.cdr=(0,e.WQX)(e.gRc)}ngAfterViewInit(){this.cdr.detectChanges(),this.loadComponent()}loadComponent(){const t=this.dcWrapper.viewContainerRef;t.clear();const i=t.createComponent(this.dynamicField.component);i.instance.formControl=this.dynamicField.fieldFormControl,i.instance.data=this.dynamicField.data,this.titleField=this.dynamicField.data.title,this.cdr.detectChanges()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-field-template"]],viewQuery:function(i,o){if(1&i&&e.GBs(h,5),2&i){let s;e.mGM(s=e.lsd())&&(o.dcWrapper=s.first)}},inputs:{fieldListener:"fieldListener",dynamicField:"dynamicField"},standalone:!0,features:[e.aNF],decls:4,vars:1,consts:[[1,"flex","flex-col","w-full","gap-1","p-2"],[1,"text-sm","font-semibold","text-muted-foreground","text-start"],["dcWrapper","","id","item"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"label",1),e.EFF(2),e.k0s(),e.DNE(3,We,0,0,"ng-template",2),e.k0s()),2&i&&(e.R7$(2),e.JRh(o.titleField||"Titulo"))},dependencies:[l.MD,h],encapsulation:2})}return n})();function Qe(n,a){1&n&&e.nrm(0,"app-field-template",4),2&n&&e.Y8G("dynamicField",a.$implicit)}let M=(()=>{class n{constructor(){this.fields=[],this.cdr=(0,e.WQX)(e.gRc)}ngOnInit(){}renderForm(){this.cdr.detectChanges()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-form-template"]],inputs:{fields:"fields",step:"step",formListener:"formListener",data:"data"},standalone:!0,features:[e.aNF],decls:5,vars:2,consts:[[1,"flex","w-full","flex-col","gap-2","bg-background","p-3"],[1,"text-sm","font-semibold","text-foreground","text-start"],[1,"flex","gap-2","flex-col","w-full"],["class","w-full",3,"dynamicField",4,"ngFor","ngForOf"],[1,"w-full",3,"dynamicField"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"label",1),e.EFF(2),e.k0s(),e.j41(3,"div",2),e.DNE(4,Qe,1,1,"app-field-template",3),e.k0s()()),2&i&&(e.R7$(2),e.JRh(o.data.description||""),e.R7$(2),e.Y8G("ngForOf",o.fields))},dependencies:[l.MD,l.Sq,Je],encapsulation:2})}return n})();function ze(n,a){1&n&&(e.qSk(),e.j41(0,"svg",9),e.nrm(1,"path",10),e.k0s())}function He(n,a){if(1&n&&(e.j41(0,"li",6)(1,"span",7),e.EFF(2),e.k0s(),e.EFF(3),e.DNE(4,ze,2,0,"svg",8),e.k0s()),2&n){const t=a.$implicit,i=a.index,o=e.XpG();e.Y8G("ngClass",i==o.actualFormIndex?" text-primary ":i<o.actualFormIndex?"text-primary hidden md:flex":"text-muted-foreground hidden md:flex"),e.R7$(),e.Y8G("classList",i<=o.actualFormIndex?"flex items-center justify-center w-5 h-5 me-2 text-xs border border-primary rounded-full shrink-0 ":"flex items-center justify-center w-5 h-5 me-2 text-xs border border-foreground  rounded-full shrink-0"),e.R7$(),e.SpI(" ",i+1," "),e.R7$(),e.SpI(" ",t.data.title," "),e.R7$(),e.Y8G("ngIf",i+1<=o.forms.length-1)}}function qe(n,a){}let Ke=(()=>{class n{constructor(){this.onCreateModal=new e.bkB,this.actualFormIndex=0,this.forms=[],this.cdr=(0,e.WQX)(e.gRc)}ngOnInit(){}ngAfterViewInit(){const t=this.createModalListener();this.loadComponent(this.actualFormIndex),this.onCreateModal.emit(t),this.cdr.detectChanges()}loadComponent(t){const i=this.forms[t],o=this.dcWrapper.viewContainerRef;o.clear();const s=o.createComponent(i.component);s.instance.step=t,s.instance.fields=i.dynamicFields,s.instance.data=i.data,s.instance.renderForm()}createModalListener(){return{onNext:()=>this.nextStepForm(),onPrev:()=>this.prevStepForm()}}nextStepForm(){return this.actualFormIndex<this.forms.length-1&&this.actualFormIndex++,this.loadComponent(this.actualFormIndex),{actualForm:this.forms[this.actualFormIndex],actualStep:this.actualFormIndex}}prevStepForm(){return this.actualFormIndex>0&&this.actualFormIndex--,this.loadComponent(this.actualFormIndex),{actualForm:this.forms[this.actualFormIndex],actualStep:this.actualFormIndex}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-modal-service-mobile"]],viewQuery:function(i,o){if(1&i&&e.GBs(h,5),2&i){let s;e.mGM(s=e.lsd())&&(o.dcWrapper=s.first)}},inputs:{forms:"forms",data:"data"},standalone:!0,features:[e.aNF],decls:6,vars:1,consts:[[1,"flex","flex-col","gap-5","w-full"],[1,"flex","flex-col","md:flex-row","bg-background","justify-between","items-center"],[1,"flex","items-center","w-full","p-3","space-x-2","text-sm","font-medium","text-center","rounded-lg","shadow-sm","sm:text-base","sm:p-4","sm:space-x-4","rtl:space-x-reverse"],["class","flex items-center  font-bold h-10 sm:w-full md:w-fit ",3,"ngClass",4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-2","bg-background"],["dcWrapper",""],[1,"flex","items-center","font-bold","h-10","sm:w-full","md:w-fit",3,"ngClass"],[3,"classList"],["class","w-3 h-3 ms-2 sm:ms-4 rtl:rotate-180","aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 12 10",4,"ngIf"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 12 10",1,"w-3","h-3","ms-2","sm:ms-4","rtl:rotate-180"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m7 9 4-4-4-4M1 9l4-4-4-4"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"ol",2),e.DNE(3,He,5,5,"li",3),e.k0s()(),e.j41(4,"div",4),e.DNE(5,qe,0,0,"ng-template",5),e.k0s()()),2&i&&(e.R7$(3),e.Y8G("ngForOf",o.forms))},dependencies:[l.MD,l.YU,l.Sq,l.bT,h],encapsulation:2})}return n})(),ue=(()=>{class n{constructor(){this.validators=[]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-input-select"]],inputs:{formControl:"formControl",data:"data",validators:"validators"},standalone:!0,features:[e.aNF],decls:1,vars:2,consts:[[3,"items","formControl"]],template:function(i,o){1&i&&e.nrm(0,"app-select",0),2&i&&e.Y8G("items",o.data.items)("formControl",o.formControl)},dependencies:[l.MD,Y,r.X1,r.BC,r.l_,r.YN],encapsulation:2})}return n})(),Ze=(()=>{class n{constructor(){this.validators=[]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-input-file"]],inputs:{formControl:"formControl",data:"data",validators:"validators"},standalone:!0,features:[e.aNF],decls:1,vars:1,consts:[[3,"formControl"]],template:function(i,o){1&i&&e.nrm(0,"app-file-input",0),2&i&&e.Y8G("formControl",o.formControl)},dependencies:[l.MD,ce,r.YN,r.BC,r.X1,r.l_],encapsulation:2})}return n})();var et=u(5003),me=u(183),tt=u(1879),it=u(9915),nt=u(3534),ot=u(2826),st=u(2999),rt=u(8246),at=u(8099),lt=u(4848),pe=u(5985),fe=u(8036);class ct extends(at.uB.classBuilder().ep({...lt.S,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(a,t,i,o){return[(0,rt.TM)(i,this.serialize,this.deserialize),(0,st.rD)(i,a.getEndpointParameterInstructions()),(0,it.R9)(i,{input:this.input,requestChecksumRequired:!1,requestValidationModeMember:"ChecksumMode",responseAlgorithms:["CRC32","CRC32C","SHA256","SHA1"]}),(0,ot.M6)(i),(0,nt.kH)(i)]}).s("AmazonS3","GetObject",{}).n("S3Client","GetObjectCommand").f(pe.DL,pe.f$).ser(fe.a$M).de(fe.pv0).build()){}var H=u(6648),X=u(6354);let dt=(()=>{class n{constructor(){this.s3Client=null,this.accessKeyId=D.c.s3_key,this.secretAccessKey=D.c.s3_secret,this.bucketS3=D.c.s3_bucket,this.s3Client=new et.Y({region:"us-east-1",credentials:{accessKeyId:this.accessKeyId,secretAccessKey:this.secretAccessKey}}),console.log("Instanciado correctamente")}createItem(t,i){if(!this.s3Client)return(0,I.of)();const o=new me.w({Bucket:this.bucketS3,Key:i,Body:t});return(0,H.H)(this.s3Client.send(o)).pipe((0,X.T)(()=>`https://${this.bucketS3}.s3.amazonaws.com/${i}`))}putObject(t,i,o){if(!this.s3Client)return(0,I.of)(null);const s=new me.w({Bucket:t,Key:i,Body:o});return(0,H.H)(this.s3Client.send(s)).pipe((0,X.T)(()=>`https://${this.bucketS3}.s3.amazonaws.com/${i}`))}deleteObject(t){if(!this.s3Client)return(0,I.of)(null);const i=new tt.k({Bucket:this.bucketS3,Key:t});return(0,H.H)(this.s3Client.send(i)).pipe((0,X.T)(()=>`https://${this.bucketS3}.s3.amazonaws.com/${t}`))}getObject(t){if(!this.s3Client)return;const i=new ct({Bucket:this.bucketS3,Key:t});return this.s3Client.send(i)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function P(n){let a;return n.form.forEach(i=>{i.dynamicFields.forEach(s=>{a={...a,[s.data.title]:s.fieldFormControl.value}})}),a}var E=u(7249),ut=u(9437),mt=u(8810);let pt=(()=>{class n{constructor(){this.apiUrl=D.c.apiUrl+"/servicios",this.http=(0,e.WQX)(V.Qq)}getAll(){return this.http.get(this.apiUrl)}getOne(t){let i=new V.Nl;return i=i.append("id",t),this.http.get(this.apiUrl,{params:i}).pipe((0,X.T)(o=>{if(0===o.length)throw new Error("User Not Found");return[o[0]]}))}create(t){throw new Error("Method not implemented.")}update(t,i){throw new Error("Method not implemented.")}delete(t){throw new Error("Method not implemented.")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),he=(()=>{class n{static#e=this.states=[{id:1,title:"Activo"},{id:2,title:"Inactivo"}]}return n})();var S=u(9969),f=function(n){return n.center="dialog-center",n.top="dialog-top",n.bottom="dialog-bottom",n.left="dialog-left",n.right="dialog-right",n}(f||{}),g=function(n){return n[n.isAlert=1]="isAlert",n[n.isSuccess=2]="isSuccess",n[n.isError=3]="isError",n[n.isLoading=4]="isLoading",n}(g||{});function ft(n,a){1&n&&e.nrm(0,"div",12)}function ht(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",13)(1,"button",14),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onSubmit())}),e.EFF(2,"Realizar"),e.k0s(),e.j41(3,"button",15),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onCancel())}),e.EFF(4,"Cancelar"),e.k0s()()}}let gt=(()=>{class n{constructor(t,i){this.elementRef=t,this.iconRegistry=i,this.title="Agregado correctamente",this.description="",this.iconUrl="assets/icons/heroicons/outline/check-badge.svg",this.colorIcon="text-green-700",this.withBackground=!1,this.cdr=(0,e.WQX)(e.gRc),this.position=[f.bottom,f.right],this.withActions=!0,this.isOpen=!1,this.timer$=(0,E.O)(100),this.timerClose$=null,this.closeEvent=new e.bkB,this.submitEvent=new e.bkB,this.cancelEvent=new e.bkB}ngOnInit(){this.notifierFromParent?.subscribe({next:t=>{this.onSubmit()},error:t=>{this.onSubmit()},complete:()=>{this.close()}}),this.timer$.subscribe(t=>{this.isOpen=!0,this.cdr.detectChanges()}),this.timerClose$?.subscribe(t=>{this.isOpen=!1,this.cdr.detectChanges(),this.onSubmit()})}changeState(){this.isOpen=!this.isOpen}onSubmit(){this.isOpen=!1,this.elementRef.nativeElement.remove(),this.submitEvent.emit()}close(){this.isOpen=!1,this.elementRef.nativeElement.remove(),this.closeEvent.emit()}onCancel(){this.isOpen=!1,this.elementRef.nativeElement.remove(),this.cancelEvent.emit()}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(e.aKT),e.rXU(j.it))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-dialog"]],inputs:{title:"title",description:"description",iconUrl:"iconUrl",colorIcon:"colorIcon",withBackground:"withBackground",notifierFromParent:"notifierFromParent",position:"position",withActions:"withActions",isOpen:"isOpen",timer$:"timer$",timerClose$:"timerClose$"},outputs:{closeEvent:"closeEvent",submitEvent:"submitEvent",cancelEvent:"cancelEvent"},standalone:!0,features:[e.aNF],decls:14,vars:10,consts:[["class","fixed inset-0 z-20 bg-gray-500 bg-opacity-75 transition-opacity ","aria-hidden","true",4,"ngIf"],[1,"flex","h-full","text-center"],[3,"ngClass"],[1,"px-4","pb-4","pt-5","sm:p-6","sm:pb-4"],[1,"flex","items-center","justify-center"],[1,"mt-3","items-center","w-fit","text-center","sm:mt-0","flex","flex-col","gap-3"],["id","modal-title",1,"items-center","w-full","font-semibold","leading-6","text-foreground","text-xl"],[1,"mx-auto","flex","h-12","flex-shrink-0","items-center","w-full","justify-center","rounded-full"],[3,"src","svgClass"],[1,"mt-2"],[1,"text-sm","text-muted-foreground"],["class"," px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",4,"ngIf"],["aria-hidden","true",1,"fixed","inset-0","z-20","bg-gray-500","bg-opacity-75","transition-opacity"],[1,"px-4","py-3","sm:flex","sm:flex-row-reverse","sm:px-6"],["type","button",1,"inline-flex","w-full","justify-center","rounded-md","bg-red-600","px-3","py-2","text-sm","font-semibold","text-white","shadow-sm","hover:bg-red-500","sm:ml-3","sm:w-auto",3,"click"],["type","button",1,"mt-3","inline-flex","w-full","justify-center","rounded-md","px-3","py-2","text-sm","font-semibold","text-foreground","shadow-sm","ring-1","ring-inset","ring-foreground","sm:mt-0","sm:w-auto",3,"click"]],template:function(i,o){1&i&&(e.DNE(0,ft,1,0,"div",0),e.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),e.EFF(7),e.k0s(),e.j41(8,"div",7),e.nrm(9,"svg-icon",8),e.k0s(),e.j41(10,"div",9)(11,"p",10),e.EFF(12),e.k0s()()()()(),e.DNE(13,ht,5,0,"div",11),e.k0s()()),2&i&&(e.Y8G("ngIf",o.withBackground),e.R7$(),e.Y8G("@openClose",o.isOpen?"open":"closed"),e.R7$(),e.Y8G("ngClass","dialog "+(null==o.position?null:o.position.join(" "))),e.R7$(5),e.SpI("",o.title," "),e.R7$(2),e.HbH(o.colorIcon),e.Y8G("src",o.iconUrl)("svgClass","h-12 w-12"),e.R7$(3),e.JRh(o.description),e.R7$(),e.Y8G("ngIf",o.withActions))},dependencies:[l.MD,l.YU,l.bT,j.DM],styles:[".dialog[_ngcontent-%COMP%]{position:absolute;z-index:20;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));align-items:center;overflow:hidden;border-radius:.5rem;background-color:hsl(var(--background));--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.dialog-top[_ngcontent-%COMP%]{top:.75rem}.dialog-center[_ngcontent-%COMP%]{top:50%;left:50%;--tw-translate-x: -50%;--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.dialog-bottom[_ngcontent-%COMP%]{bottom:.75rem}.dialog-left[_ngcontent-%COMP%]{left:.75rem}.dialog-right[_ngcontent-%COMP%]{right:.75rem}"],data:{animation:[(0,S.hZ)("openClose",[(0,S.wk)("open",(0,S.iF)({opacity:1,visibility:"visible"})),(0,S.wk)("closed",(0,S.iF)({opacity:0,visibility:"hidden"})),(0,S.kY)("open => closed",[(0,S.i0)("0.3s")]),(0,S.kY)("closed => open",[(0,S.i0)("0.1s")])])]}})}return n})(),q=(()=>{class n{constructor(t,i,o){this.resolver=t,this.injector=i,this.document=o,this.onOpen=(0,E.O)(1e3)}open(t){const o=this.resolver.resolveComponentFactory(gt).create(this.injector),s=o.instance;if(t.typeDialog)switch(t.typeDialog){case g.isAlert:s.iconUrl="assets/icons/heroicons/outline/exclamation.svg",s.colorIcon="text-orange-500";break;case g.isSuccess:s.iconUrl="assets/icons/heroicons/outline/check-badge.svg",s.colorIcon="text-green-700";break;case g.isLoading:s.iconUrl="assets/icons/loading.svg",s.colorIcon="text-primary";break;case g.isError:s.iconUrl="assets/icons/heroicons/outline/exclamation.svg",s.colorIcon="text-red-500"}return t.options&&(s.position=t.options.position,s.withActions=t.options.withActions,s.timerClose$=t.options.timeToShow?t.options.timeToShow:null,s.withBackground=t.options.withBackground,s.colorIcon=t.options.colorIcon),t.data&&(s.title=t.data.title,s.description=t.data.description,s.iconUrl=t.data.icon),t.listener&&(s.notifierFromParent=t.listener),s.closeEvent.subscribe(()=>{this.closeDialog()}),s.submitEvent.subscribe(()=>{this.submitDialog()}),s.cancelEvent.subscribe(()=>{}),this.onOpen.subscribe(()=>{o.hostView.detectChanges(),s.isOpen=!0}),this.document.body.appendChild(o.location.nativeElement),o.hostView.detectChanges(),this.dialogNotifier=new G.B,this.dialogNotifier.asObservable()}closeDialog(){this.dialogNotifier?.complete()}submitDialog(){this.dialogNotifier?.next(null),this.closeDialog()}cancelDialog(){this.dialogNotifier?.error(null),this.closeDialog()}static#e=this.\u0275fac=function(i){return new(i||n)(e.KVO(e.OM3),e.KVO(e.zZn),e.KVO(l.qQ))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var y=u(2934),vt=u(714);class T{static#e=this.getSlices=(0,y.OD)(vt.W);static#t=this.getCoverages=(0,y.Mz)([T.getSlices.coverages],a=>a);static#i=this.getCoverage=(0,y.Mz)([T.getSlices.coverageById],a=>a);static#n=this.getStatus=(0,y.Mz)([T.getSlices.status],a=>a)}var R=u(4570);class K{constructor(a,t,i,o,s){this.coverage_id=a,this.title=t,this.description=i,this.previousFiles=o,this.files=s}static create(a){const{coverageId:t,serviceId:i,title:o,description:s,previousFiles:c,files:d}=a;return t?i?o?s?c?d?[void 0,new K(t,o,s,c,d)]:["Files is required",void 0]:["Previous Files is required",void 0]:["Description is required",void 0]:["Title is required",void 0]:["Service Id is required",void 0]:["Coverage Id is required",void 0]}}class Z{constructor(a,t,i){this.title=a,this.description=t,this.files=i}static create(a){const{service_id:t,title:i,description:o,files:s}=a;return t?i?o?s?[void 0,new Z(i,o,s)]:["Files is required",void 0]:["Description is required",void 0]:["Title is required",void 0]:["Service Id is required",void 0]}}class L{constructor(a,t){this.file=a,this.filename=t}static create(a){const{file:t,filename:i}=a;return t?i?[void 0,new L(t,i)]:["Filename is required",void 0]:["File is required",void 0]}}let ge=(()=>{class n{constructor(){this._store=(0,e.WQX)(y.il),this.statusAction=this._store.selectSignal(T.getStatus),this.coverages=this._store.selectSignal(T.getCoverages),this._store.dispatch(new R.c.GetAll)}addItem(t,i,o){const s=o.map(d=>new L(d,d.name)),c=new Z(t,i,s);this._store.dispatch(new R.c.Create(c))}updateItem(t,i,o,s,c){const d=c.map(p=>new L(p,p.name)),m=new K(t,i,o,s,d);this._store.dispatch(new R.c.Update(m))}deleteItem(t){this._store.dispatch(new R.c.Delete(t.coverage_id?t.coverage_id:t.id,t.files))}getItems(){this._store.dispatch(new R.c.GetAll)}getItem(t){this._store.dispatch(new R.c.Get(t))}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bt(n,a){}let xt=(()=>{class n{constructor(){var i,t=this;this.onShowItem=!1,this.listServices=[],this.listServiceCRM=[],this.states=he.states,this.listServicesUi=[],this.services=(0,e.WQX)(Ie),this.servicesCRM=(0,e.WQX)(pt),this.modalService=(0,e.WQX)(U),this.s3Service=(0,e.WQX)(dt),this.dialogService=(0,e.WQX)(q),this.coverageFacade=(0,e.WQX)(ge),this.isLoadingListItems=!0,this.coverages$=this.coverageFacade.coverages,this.detailListener={close:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},submit:(i=(0,O.A)(function*(o){t.dcWrapper.viewContainerRef.clear(),t.onShowItem=!1;const{id:s,plan:c,description:d,image:m,status:p}=o.value,b=p,x=t.listServicesUi.findIndex(F=>F.service_id===s||F.id===s),w=t.listServicesUi[x],_=t.listServicesUi[x].img_url,oe=_.substring(_.lastIndexOf("/")+1),se=Math.floor(1e3*Math.random()),be=m.name.split("."),fi=`${se}-${c}`,hi=be[be.length-1],B={typeDialog:g.isAlert,data:{title:"Advertencia",description:"Estas seguro de realizar esta accion",icon:"assets/icons/heroicons/outline/exclamation.svg"},options:{withActions:!0,position:[f.center],withBackground:!0,colorIcon:"text-red-500"}};t.dialogService.open(B).pipe((0,v.n)(F=>(0,I.of)(null)),(0,v.n)(F=>(t.isLoadingListItems=!0,t.s3Service.deleteObject(oe))),(0,v.n)(F=>t.s3Service.createItem(m,fi+"."+hi)),(0,v.n)(F=>t.services.updateService({id:s,service_id:s,servicio_id:c,description:d,status:b,destiny:w.destiny,img_url:F}))).subscribe({next:F=>{const gi={...F,service:t.listServiceCRM.find(ae=>ae.servicio_id==s),status:t.states.find(ae=>ae.id===b)||{id:0,title:""}};t.listServicesUi[x]=gi,B.typeDialog=g.isSuccess,B.data={title:"Actualizado",description:"El servicio ha sido actualizado correctamente",icon:"assets/icons/heroicons/outline/check-badge.svg"},B.options={withActions:!1,position:[f.top,f.right],withBackground:!1,colorIcon:"text-green-700",timeToShow:(0,E.O)(2e3)},t.dialogService.open(B)},error:F=>{console.log({err:F})},complete:()=>{t.isLoadingListItems=!1}})}),function(s){return i.apply(this,arguments)}),cancel:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},delete:i=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1;const o=this.listServicesUi.findIndex(m=>m.service_id===i||m.id===i),s=this.listServicesUi[o].img_url,c=s.substring(s.lastIndexOf("/")+1),d={typeDialog:g.isAlert,data:{title:"Advertencia",description:"Estas seguro de realizar esta accion",icon:"assets/icons/heroicons/outline/exclamation.svg"},options:{withActions:!0,position:[f.center],withBackground:!0,colorIcon:"text-red-500"}};this.dialogService.open(d).pipe((0,v.n)(m=>(0,I.of)(null)),(0,v.n)(m=>this.s3Service.deleteObject(c)),(0,v.n)(m=>this.services.deleteService(i))).subscribe({next:m=>{d.typeDialog=g.isSuccess,d.data={title:"Eliminado",description:"El servicio ha sido eliminado correctamente",icon:"assets/icons/heroicons/outline/check-badge.svg"},d.options={withActions:!1,position:[f.top,f.right],withBackground:!1,colorIcon:"text-green-700",timeToShow:(0,E.O)(2e3)},this.dialogService.open(d),this.listServicesUi.splice(o,1)},error:m=>{console.log({err:m})},complete:()=>{console.log({fileName:c})}})}}}ngOnInit(){this.services.getServices().pipe((0,v.n)(t=>(this.listServices=[...t],this.servicesCRM.getAll()))).subscribe({next:t=>{this.listServiceCRM=[...t],this.listServicesUi=this.listServices.map(i=>{const o=this.listServiceCRM.filter(s=>s.servicio_id===i.servicio_id)[0];return{...i,service:o,status:this.states.find(s=>s.id===i.status)||{id:0,title:""}}}),this.isLoadingListItems=!1},error:t=>{},complete:()=>{}})}onDetailService(t){const i=this.dcWrapper.viewContainerRef;i.clear();const o=i.createComponent(Le);o.instance.detailListener=this.detailListener,o.instance.service=t,o.instance.data={items:this.listServiceCRM.map(s=>({id:s.servicio_id,name:s.servicio}))},this.onShowItem=!0}onAddService(){const t={component:M,data:{title:"Detalles del servicio",description:"Especificaciones necesarias del servicio"},dynamicFields:[{component:ue,data:{title:"Plan",items:this.listServiceCRM.map(o=>({id:o.servicio_id,name:o.servicio}))},fieldFormControl:new r.MJ("")},{component:C,data:{placeholder:"Descripcion general del plan",title:"Descripcion"},fieldFormControl:new r.MJ("")},{component:C,data:{placeholder:"Destinos que se podran visualizar",title:"Destinos"},fieldFormControl:new r.MJ("")}]},i={component:M,data:{title:"Imagen",description:"Selecciona la imagen a agregar"},dynamicFields:[{component:Ze,data:{title:"Imagen"},fieldFormControl:new r.MJ("")}]};this.modalService.open(Ke,{title:"Agregar Plan",size:"sm",forms:[t,i],data:{},icon:"assets/icons/heroicons/outline/plus.svg",actions:[{action:k.Create,title:"Agregar"}]}).pipe((0,v.n)(o=>this.dialogService.open({typeDialog:g.isAlert,data:{title:"Advertencia",description:"Estas seguro de realizar esta accion",icon:"assets/icons/heroicons/outline/exclamation.svg"},options:{withActions:!0,position:[f.center],withBackground:!0,colorIcon:"text-red-500"}}).pipe((0,v.n)(c=>(0,I.of)(o)))),(0,v.n)(o=>{this.isLoadingListItems=!0;const s=P(o),{Plan:c,Descripcion:d,Imagen:m,Destinos:p}=s,b=Math.floor(1e3*Math.random()),x=m.name.split(".");return this.s3Service.createItem(m,`${b}-${c}.`+x[x.length-1]).pipe((0,v.n)(oe=>(0,I.of)({servicio_id:c,description:d,destiny:p,img_url:oe,status:1})))}),(0,v.n)(o=>this.services.createService(o).pipe((0,v.n)(s=>(0,I.of)(o)),(0,ut.W)(s=>(0,mt.$)({newService:o,err:s}))))).subscribe({next:o=>{this.listServices.push(o),this.listServicesUi.push({...o,service:this.listServiceCRM.filter(s=>s.servicio_id===o.servicio_id)[0],status:this.states.find(s=>s.id===o.status)||{id:0,title:""}})},complete:()=>{this.isLoadingListItems=!1},error:o=>{const s={typeDialog:g.isAlert,data:{title:"Error",description:"Ha ocurrido un error al agregar el servicio",icon:"assets/icons/heroicons/outline/x-circle.svg"},options:{withActions:!1,position:[f.top,f.right],withBackground:!1,colorIcon:"text-red-700",timeToShow:(0,E.O)(2e3)}};this.dialogService.open(s),o.newService&&this.s3Service.deleteObject(o.newService.img_url.split("/").pop())}})}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-service-mobile"]],viewQuery:function(i,o){if(1&i&&e.GBs(h,5),2&i){let s;e.mGM(s=e.lsd())&&(o.dcWrapper=s.first)}},standalone:!0,features:[e.aNF],decls:5,vars:4,consts:[[3,"classList"],[3,"onAddServiceToggle"],[3,"onSelectService","isLoading","listServices"],["dcWrapper",""]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",0)(2,"app-service-mobile-header",1),e.bIt("onAddServiceToggle",function(){return o.onAddService()}),e.k0s(),e.j41(3,"app-list-service-mobile",2),e.bIt("onSelectService",function(c){return o.onDetailService(c)}),e.k0s()(),e.DNE(4,bt,0,0,"ng-template",3),e.k0s()),2&i&&(e.Y8G("classList",o.onShowItem?"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-auto  h-full ":"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-hidden  h-full "),e.R7$(),e.Y8G("classList",o.onShowItem?" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-0 md:py-4":" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-4"),e.R7$(2),e.Y8G("isLoading",o.isLoadingListItems)("listServices",o.listServicesUi))},dependencies:[l.MD,we,ye,h],encapsulation:2})}return n})(),wt=(()=>{class n{constructor(){this.onAddLinkToggle=new e.bkB}ngOnInit(){}onAddToggle(){this.onAddLinkToggle.emit()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-links-header"]],outputs:{onAddLinkToggle:"onAddLinkToggle"},standalone:!0,features:[e.aNF],decls:12,vars:0,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"],[1,"flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-medium","text-primary-foreground",3,"click"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"h3",2),e.EFF(3,"Enlaces"),e.k0s(),e.j41(4,"div",3)(5,"a",4),e.EFF(6,"Lista"),e.k0s(),e.j41(7,"span"),e.EFF(8," - Enlaces"),e.k0s()()(),e.j41(9,"div",5)(10,"button",6),e.bIt("click",function(){return o.onAddToggle()}),e.EFF(11," Agregar Enlace "),e.k0s()()())},dependencies:[l.MD],encapsulation:2})}return n})();const _t=["item-list-link",""];let Ft=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["","item-list-link",""]],inputs:{link:"link"},standalone:!0,features:[e.aNF],attrs:_t,decls:12,vars:4,consts:[[1,"py-3","pl-3","text-start"],[1,"text-sm","text-muted-foreground"],[1,"pr-1"],[1,"py-3","pl-3","text-right"],[1,"p-2","text-sm","text-muted-foreground",3,"ngClass"]],template:function(i,o){1&i&&(e.j41(0,"td",0)(1,"div")(2,"span",1),e.EFF(3),e.k0s()()(),e.j41(4,"td",0)(5,"div",2)(6,"span",1),e.EFF(7),e.k0s()()(),e.j41(8,"td",3)(9,"div",2)(10,"span",4),e.EFF(11),e.k0s()()()),2&i&&(e.R7$(3),e.JRh(o.link.title),e.R7$(4),e.JRh(o.link.subtitle),e.R7$(3),e.Y8G("ngClass",1==o.link.status.id?"border border-green-800 items-end w-fit rounded-md ":"border border-red-800  items-end w-fit rounded-md "),e.R7$(),e.JRh(o.link.status.title))},dependencies:[l.MD,l.YU],encapsulation:2})}return n})();function kt(n,a){if(1&n){const t=e.RV6();e.j41(0,"tr",16),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.onSelectTable(o))}),e.k0s()}2&n&&e.Y8G("link",a.$implicit)}function Ct(n,a){1&n&&(e.j41(0,"div",17),e.nrm(1,"svg-icon",18),e.k0s())}let yt=(()=>{class n{constructor(){this.links=[],this.states=[],this.onSelectLink=new e.bkB,this.isLoading=!0}onSelectTable(t){this.onSelectLink.emit(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-list-links"]],inputs:{links:"links",states:"states",isLoading:"isLoading"},outputs:{onSelectLink:"onSelectLink"},standalone:!0,features:[e.aNF],decls:24,vars:2,consts:[[1,"flex-col","rounded-lg","bg-background","px-8","py-8","sm:flex-row"],[1,"border-dashed","border-border"],[1,"w-full","flex","flex-col","p-2","gap-2"],[1,"flex","flex-row","items-center","justify-between","w-full"],[1,"w-1/2"],[1,"flex","flex-row","gap-2"],[1,"w-full"],[1,"text-muted-foreground","text-sm"],["type","text","placeholder","nuevo enlace",1,"w-full","border","border-border","rounded-lg","p-2"],[1,"relative","overflow-x-auto","p-2","h-72","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","overflow-auto","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted"],[1,"w-full","table-auto"],[1,"text-xs","uppercase","text-muted-foreground","sticky","top-0","bg-background"],[1,"py-3","text-left"],[1,"py-3","text-right"],["item-list-link","","class","border-b border-dashed border-border hover:bg-card",3,"link","click",4,"ngFor","ngForOf"],["class","absolute inset-0 flex items-center justify-center bg-slate-800 bg-opacity-50",4,"ngIf"],["item-list-link","",1,"border-b","border-dashed","border-border","hover:bg-card",3,"click","link"],[1,"absolute","inset-0","flex","items-center","justify-center","bg-slate-800","bg-opacity-50"],["src","assets/icons/loading.svg","svgClass","h-12 w-12 text-primary"]],template:function(i,o){1&i&&(e.j41(0,"div",0),e.nrm(1,"hr",1),e.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),e.EFF(8,"Enlaces"),e.k0s(),e.nrm(9,"input",8),e.k0s()()()()(),e.nrm(10,"hr",1),e.j41(11,"div",9)(12,"table",10)(13,"thead",11)(14,"tr")(15,"th",12),e.EFF(16,"Titulo"),e.k0s(),e.j41(17,"th",12),e.EFF(18,"Subtitulo"),e.k0s(),e.j41(19,"th",13),e.EFF(20,"Status"),e.k0s()()(),e.j41(21,"tbody"),e.DNE(22,kt,1,1,"tr",14),e.k0s()(),e.DNE(23,Ct,2,0,"div",15),e.k0s()()),2&i&&(e.R7$(22),e.Y8G("ngForOf",o.links),e.R7$(),e.Y8G("ngIf",o.isLoading))},dependencies:[l.MD,l.Sq,l.bT,Ft,j.DM],encapsulation:2})}return n})(),It=(()=>{class n{constructor(){this.apiMobile=D.c.apiMobile+"links",this.http=(0,e.WQX)(V.Qq)}getLinks(){return this.http.get(this.apiMobile)}getLinkById(t){return this.http.get(`${this.apiMobile}?id=${t}`)}createLink(t){return this.http.post(this.apiMobile,t)}updateLink(t){return this.http.put(`${this.apiMobile}?id=${t.id}`,t)}deleteLink(t){return this.http.delete(`${this.apiMobile}?id=${t}`)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),St=(()=>{class n{constructor(){this.listStatus=[{id:1,name:"Activo"},{id:2,name:"Inactivo"}],this.linkForm=new r.gE({id:new r.MJ,title:new r.MJ,subtitle:new r.MJ,url:new r.MJ,status:new r.MJ})}ngOnInit(){this.linkForm.setValue({id:this.link.id||this.link.link_id,title:this.link.title,subtitle:this.link.subtitle,url:this.link.url,status:this.link.status.id})}close(){this.detailListener.close()}onSubmit(){this.detailListener.submit(this.linkForm)}delete(){this.detailListener.delete(this.link.link_id||this.link.id)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-link-detail"]],inputs:{detailListener:"detailListener",link:"link"},standalone:!0,features:[e.aNF],decls:38,vars:3,consts:[[1,"flex","w-screen","md:w-96","bg-background","h-full","overflow-auto","gap-2","px-3","flex-col","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted",3,"ngSubmit","formGroup"],[1,"sticky","top-0","flex","flex-col","bg-background"],[1,"flex","relative","flex-row","items-center","gap-2","py-3","justify-start"],[1,"text-lg","text-foreground"],[1,"absolute","cursor-pointer","right-0","inline-flex","w-fit","justify-center","rounded-md","bg-background","px-3","py-2","text-sm","font-semibold","text-foreground","shadow-sm","ring-1","ring-inset","ring-foreground","hover:bg-card","sm:mt-0","sm:w-fit",3,"click"],[1,"border-dashed","border-border"],[1,"flex","py-2","flex-col"],[1,"px-2","flex-col","flex"],[1,"px-2","flex-col","flex","gap-2"],[1,"text-xs","text-muted-foreground"],["type","text","formControlName","title","placeholder","google"],["type","text","formControlName","subtitle","placeholder","Enlace general con detalles precisos"],["type","text","formControlName","url","placeholder","https://google.com"],["formControlName","status",3,"items"],[1,"flex","py-2","flex-col","gap-2"],["type","submit",1,"bg-primary","text-white","rounded-md","p-2"],[1,""],["type","button",1,"bg-red-500","text-white","rounded-md","p-2",3,"click"]],template:function(i,o){1&i&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(1,"div",1)(2,"div",2)(3,"span",3),e.EFF(4),e.k0s(),e.j41(5,"button",4),e.bIt("click",function(){return o.close()}),e.EFF(6," X "),e.k0s()(),e.nrm(7,"hr",5),e.k0s(),e.j41(8,"div",6),e.nrm(9,"div",7),e.j41(10,"div",6)(11,"div",8)(12,"span",9),e.EFF(13,"Titulo"),e.k0s(),e.nrm(14,"input",10),e.k0s()(),e.nrm(15,"hr",5),e.j41(16,"div",6)(17,"div",8)(18,"span",9),e.EFF(19,"Subtitulo"),e.k0s(),e.nrm(20,"input",11),e.k0s()(),e.j41(21,"div",6)(22,"div",8)(23,"span",9),e.EFF(24,"Enlace"),e.k0s(),e.nrm(25,"input",12),e.k0s()(),e.j41(26,"div",6)(27,"div",8)(28,"span",9),e.EFF(29,"Estado"),e.k0s(),e.nrm(30,"app-select",13),e.k0s()(),e.nrm(31,"hr",5),e.j41(32,"div",14)(33,"button",15),e.EFF(34," Guardar Cambios "),e.k0s(),e.nrm(35,"hr",16),e.j41(36,"button",17),e.bIt("click",function(){return o.delete()}),e.EFF(37," Eliminar "),e.k0s()()()()),2&i&&(e.Y8G("formGroup",o.linkForm),e.R7$(4),e.JRh("Detalles del enlace"),e.R7$(26),e.Y8G("items",o.listStatus))},dependencies:[l.MD,Y,r.X1,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,r.YN],encapsulation:2})}return n})();function jt(n,a){1&n&&(e.qSk(),e.j41(0,"svg",9),e.nrm(1,"path",10),e.k0s())}function Mt(n,a){if(1&n&&(e.j41(0,"li",6)(1,"span",7),e.EFF(2),e.k0s(),e.EFF(3),e.DNE(4,jt,2,0,"svg",8),e.k0s()),2&n){const t=a.$implicit,i=a.index,o=e.XpG();e.Y8G("ngClass",i==o.actualFormIndex?" text-primary ":i<o.actualFormIndex?"text-primary hidden md:flex":"text-muted-foreground hidden md:flex"),e.R7$(),e.Y8G("classList",i<=o.actualFormIndex?"flex items-center justify-center w-5 h-5 me-2 text-xs border border-primary rounded-full shrink-0 ":"flex items-center justify-center w-5 h-5 me-2 text-xs border border-foreground  rounded-full shrink-0"),e.R7$(),e.SpI(" ",i+1," "),e.R7$(),e.SpI(" ",t.data.title," "),e.R7$(),e.Y8G("ngIf",i+1<=o.forms.length-1)}}function Et(n,a){}let Dt=(()=>{class n{constructor(){this.onCreateModal=new e.bkB,this.actualFormIndex=0,this.forms=[],this.cdr=(0,e.WQX)(e.gRc)}ngOnInit(){}ngAfterViewInit(){const t=this.createModalListener();this.loadComponent(this.actualFormIndex),this.onCreateModal.emit(t),this.cdr.detectChanges()}loadComponent(t){const i=this.forms[t],o=this.dcWrapper.viewContainerRef;o.clear();const s=o.createComponent(i.component);s.instance.step=t,s.instance.fields=i.dynamicFields,s.instance.data=i.data,s.instance.renderForm()}createModalListener(){return{onNext:()=>this.nextStepForm(),onPrev:()=>this.prevStepForm()}}nextStepForm(){return this.actualFormIndex<this.forms.length-1&&this.actualFormIndex++,this.loadComponent(this.actualFormIndex),{actualForm:this.forms[this.actualFormIndex],actualStep:this.actualFormIndex}}prevStepForm(){return this.actualFormIndex>0&&this.actualFormIndex--,this.loadComponent(this.actualFormIndex),{actualForm:this.forms[this.actualFormIndex],actualStep:this.actualFormIndex}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-modal-link"]],viewQuery:function(i,o){if(1&i&&e.GBs(h,5),2&i){let s;e.mGM(s=e.lsd())&&(o.dcWrapper=s.first)}},inputs:{forms:"forms",data:"data"},standalone:!0,features:[e.aNF],decls:6,vars:1,consts:[[1,"flex","flex-col","gap-5","w-full"],[1,"flex","flex-col","md:flex-row","bg-background","justify-between","items-center"],[1,"flex","items-center","w-full","p-3","space-x-2","text-sm","font-medium","text-center","rounded-lg","shadow-sm","sm:text-base","sm:p-4","sm:space-x-4","rtl:space-x-reverse"],["class","flex items-center  font-bold h-10 sm:w-full md:w-fit ",3,"ngClass",4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-2","bg-background"],["dcWrapper",""],[1,"flex","items-center","font-bold","h-10","sm:w-full","md:w-fit",3,"ngClass"],[3,"classList"],["class","w-3 h-3 ms-2 sm:ms-4 rtl:rotate-180","aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 12 10",4,"ngIf"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 12 10",1,"w-3","h-3","ms-2","sm:ms-4","rtl:rotate-180"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m7 9 4-4-4-4M1 9l4-4-4-4"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"ol",2),e.DNE(3,Mt,5,5,"li",3),e.k0s()(),e.j41(4,"div",4),e.DNE(5,Et,0,0,"ng-template",5),e.k0s()()),2&i&&(e.R7$(3),e.Y8G("ngForOf",o.forms))},dependencies:[l.MD,l.YU,l.Sq,l.bT,h],encapsulation:2})}return n})();function Tt(n,a){}let Rt=(()=>{class n{constructor(){this.detailListener={close:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},submit:t=>{console.log({value:t.value}),this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,console.log({details:t});const{id:i,status:o,title:s,subtitle:c,url:d}=t.value,m={id:i,status:o,title:s,subtitle:c,url:d};this.linkService.updateLink(m).subscribe({next:p=>{const b=this.states.find(_=>_.id===m.status)||{id:0,title:""},x={link_id:i,id:i,status:b,title:s,subtitle:c,url:d},w=this.links.findIndex(_=>_.link_id===m.id);-1!==w&&(this.links[w]=x),console.log({item:this.links[w]})},error:p=>{console.log({err:p})},complete:()=>{}})},cancel:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},delete:t=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,this.linkService.deleteLink(t).subscribe({next:i=>{const o=this.links.findIndex(s=>s.id===t||s.link_id===t);-1!==o&&this.links.splice(o,1)},error:i=>{},complete:()=>{}})}},this.states=he.states,this.onShowItem=!1,this.linkService=(0,e.WQX)(It),this.modalService=(0,e.WQX)(U),this.onLoadingItems=!1,this.links=[]}ngOnInit(){this.onLoadingItems=!0,this.linkService.getLinks().subscribe({next:t=>{this.links=[...t.map(i=>{const o=this.states.find(s=>s.id===i.status)||{id:0,title:""};return{...i,status:o}})],this.onLoadingItems=!1},error:t=>{},complete:()=>{}})}onAddLink(){const t={component:M,data:{title:"Detalles del nuevo link a agregar",description:"Especificaciones necesarias del link a agregar"},dynamicFields:[{component:C,data:{placeholder:"Nuevo Enlace",title:"Titulo"},fieldFormControl:new r.MJ("")},{component:C,data:{placeholder:"Descripcion general del enlace",title:"Subtitulo"},fieldFormControl:new r.MJ("")},{component:C,data:{placeholder:"https://google.com",title:"url"},fieldFormControl:new r.MJ("")}]};this.modalService.open(Dt,{title:"Agregar Enlace",size:"sm",forms:[t],data:{},icon:"assets/icons/heroicons/outline/plus.svg",actions:[{action:k.Create,title:"Agregar"}]}).subscribe({next:i=>{const o=P(i),{Titulo:s,Subtitulo:c,url:d}=o;this.linkService.createLink({title:s,subtitle:c,url:d,status:1}).subscribe({next:p=>{this.links.push({...p,status:this.states.find(b=>b.id===p.status)||{id:0,title:""}})},error:p=>{},complete:()=>{}})},error:i=>{console.log({err:i})},complete:()=>{console.log("Complete")}})}onDetailLink(t){const i=this.dcWrapper.viewContainerRef;i.clear();const o=i.createComponent(St);o.instance.detailListener=this.detailListener,o.instance.link=t,this.onShowItem=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-links"]],viewQuery:function(i,o){if(1&i&&e.GBs(h,5),2&i){let s;e.mGM(s=e.lsd())&&(o.dcWrapper=s.first)}},standalone:!0,features:[e.aNF],decls:5,vars:4,consts:[[3,"classList"],[3,"onAddLinkToggle"],[3,"onSelectLink","isLoading","links"],["dcWrapper",""]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",0)(2,"app-links-header",1),e.bIt("onAddLinkToggle",function(){return o.onAddLink()}),e.k0s(),e.j41(3,"app-list-links",2),e.bIt("onSelectLink",function(c){return o.onDetailLink(c)}),e.k0s()(),e.DNE(4,Tt,0,0,"ng-template",3),e.k0s()),2&i&&(e.Y8G("classList",o.onShowItem?"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-auto  h-full ":"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-hidden  h-full "),e.R7$(),e.Y8G("classList",o.onShowItem?" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-0 md:py-4":" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-4"),e.R7$(2),e.Y8G("isLoading",o.onLoadingItems)("links",o.links))},dependencies:[l.MD,wt,yt,h],encapsulation:2})}return n})(),Lt=(()=>{class n{constructor(){this.onAddToggleAction=new e.bkB}onAddToggle(){this.onAddToggleAction.emit()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-coverages-header"]],outputs:{onAddToggleAction:"onAddToggleAction"},standalone:!0,features:[e.aNF],decls:12,vars:0,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"],[1,"flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-medium","text-primary-foreground",3,"click"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"h3",2),e.EFF(3,"Coberturas"),e.k0s(),e.j41(4,"div",3)(5,"a",4),e.EFF(6,"Lista"),e.k0s(),e.j41(7,"span"),e.EFF(8," - Coberturas"),e.k0s()()(),e.j41(9,"div",5)(10,"button",6),e.bIt("click",function(){return o.onAddToggle()}),e.EFF(11," Agregar Cobertura "),e.k0s()()())},dependencies:[l.MD],encapsulation:2})}return n})();const Nt=["item-list-coverage",""];let At=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["","item-list-coverage",""]],inputs:{coverage:"coverage"},standalone:!0,features:[e.aNF],attrs:Nt,decls:12,vars:3,consts:[[1,"py-3","pl-3","text-start"],[1,"text-sm","text-muted-foreground"],[1,"pr-1"],[1,"py-3","pl-3","text-right"]],template:function(i,o){1&i&&(e.j41(0,"td",0)(1,"div")(2,"span",1),e.EFF(3),e.k0s()()(),e.j41(4,"td",0)(5,"div",2)(6,"span",1),e.EFF(7),e.k0s()()(),e.j41(8,"td",3)(9,"div",2)(10,"span",1),e.EFF(11),e.k0s()()()),2&i&&(e.R7$(3),e.JRh(o.coverage.coverage_id),e.R7$(4),e.JRh(o.coverage.title),e.R7$(4),e.SpI(" ",o.coverage.description," "))},dependencies:[l.MD],encapsulation:2})}return n})();function Gt(n,a){if(1&n){const t=e.RV6();e.j41(0,"tr",15),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.onSelectTable(o))}),e.k0s()}2&n&&e.Y8G("coverage",a.$implicit)}let Bt=(()=>{class n{constructor(){this.coverages=[],this.onSelectCoverage=new e.bkB}onSelectTable(t){this.onSelectCoverage.emit(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-list-coverages"]],inputs:{coverages:"coverages"},outputs:{onSelectCoverage:"onSelectCoverage"},standalone:!0,features:[e.aNF],decls:23,vars:1,consts:[[1,"flex-col","rounded-lg","bg-background","px-8","py-8","sm:flex-row"],[1,"border-dashed","border-border"],[1,"w-full","flex","flex-col","p-2","gap-2"],[1,"flex","flex-row","items-center","justify-between","w-full"],[1,"w-1/2"],[1,"flex","flex-row","gap-2"],[1,"w-full"],[1,"text-muted-foreground","text-sm"],["type","text","placeholder","Nueva cobertura",1,"w-full","border","border-border","rounded-lg","p-2"],[1,"relative","overflow-x-auto","p-2","h-72","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","overflow-auto","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted"],[1,"w-full","table-auto"],[1,"text-xs","uppercase","text-muted-foreground","sticky","top-0","bg-background"],[1,"py-3","text-left"],[1,"py-3","text-right"],["item-list-coverage","","class","border-b border-dashed border-border hover:bg-card",3,"coverage","click",4,"ngFor","ngForOf"],["item-list-coverage","",1,"border-b","border-dashed","border-border","hover:bg-card",3,"click","coverage"]],template:function(i,o){1&i&&(e.j41(0,"div",0),e.nrm(1,"hr",1),e.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),e.EFF(8,"Coberturas"),e.k0s(),e.nrm(9,"input",8),e.k0s()()()()(),e.nrm(10,"hr",1),e.j41(11,"div",9)(12,"table",10)(13,"thead",11)(14,"tr")(15,"th",12),e.EFF(16,"Cobertura id"),e.k0s(),e.j41(17,"th",12),e.EFF(18,"Titulo"),e.k0s(),e.j41(19,"th",13),e.EFF(20,"Descripcion"),e.k0s()()(),e.j41(21,"tbody"),e.DNE(22,Gt,1,1,"tr",14),e.k0s()()()()),2&i&&(e.R7$(22),e.Y8G("ngForOf",o.coverages))},dependencies:[l.MD,l.Sq,At],encapsulation:2})}return n})();function $t(n,a){1&n&&(e.qSk(),e.j41(0,"svg",9),e.nrm(1,"path",10),e.k0s())}function Ot(n,a){if(1&n&&(e.j41(0,"li",6)(1,"span",7),e.EFF(2),e.k0s(),e.EFF(3),e.DNE(4,$t,2,0,"svg",8),e.k0s()),2&n){const t=a.$implicit,i=a.index,o=e.XpG();e.Y8G("ngClass",i==o.actualFormIndex?" text-primary ":i<o.actualFormIndex?"text-primary hidden md:flex":"text-muted-foreground hidden md:flex"),e.R7$(),e.Y8G("classList",i<=o.actualFormIndex?"flex items-center justify-center w-5 h-5 me-2 text-xs border border-primary rounded-full shrink-0 ":"flex items-center justify-center w-5 h-5 me-2 text-xs border border-foreground  rounded-full shrink-0"),e.R7$(),e.SpI(" ",i+1," "),e.R7$(),e.SpI(" ",t.data.title," "),e.R7$(),e.Y8G("ngIf",i+1<=o.forms.length-1)}}function Vt(n,a){}let Yt=(()=>{class n{constructor(){this.onCreateModal=new e.bkB,this.actualFormIndex=0,this.forms=[],this.cdr=(0,e.WQX)(e.gRc)}ngOnInit(){}ngAfterViewInit(){const t=this.createModalListener();this.loadComponent(this.actualFormIndex),this.onCreateModal.emit(t),this.cdr.detectChanges()}loadComponent(t){const i=this.forms[t],o=this.dcWrapper.viewContainerRef;o.clear();const s=o.createComponent(i.component);s.instance.step=t,s.instance.fields=i.dynamicFields,s.instance.data=i.data,s.instance.renderForm()}createModalListener(){return{onNext:()=>this.nextStepForm(),onPrev:()=>this.prevStepForm()}}nextStepForm(){return this.actualFormIndex<this.forms.length-1&&this.actualFormIndex++,this.loadComponent(this.actualFormIndex),{actualForm:this.forms[this.actualFormIndex],actualStep:this.actualFormIndex}}prevStepForm(){return this.actualFormIndex>0&&this.actualFormIndex--,this.loadComponent(this.actualFormIndex),{actualForm:this.forms[this.actualFormIndex],actualStep:this.actualFormIndex}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-modal-coverages"]],viewQuery:function(i,o){if(1&i&&e.GBs(h,5),2&i){let s;e.mGM(s=e.lsd())&&(o.dcWrapper=s.first)}},inputs:{forms:"forms",data:"data"},standalone:!0,features:[e.aNF],decls:6,vars:1,consts:[[1,"flex","flex-col","gap-5","w-full"],[1,"flex","flex-col","md:flex-row","bg-background","justify-between","items-center"],[1,"flex","items-center","w-full","p-3","space-x-2","text-sm","font-medium","text-center","rounded-lg","shadow-sm","sm:text-base","sm:p-4","sm:space-x-4","rtl:space-x-reverse"],["class","flex items-center  font-bold h-10 sm:w-full md:w-fit ",3,"ngClass",4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-2","bg-background"],["dcWrapper",""],[1,"flex","items-center","font-bold","h-10","sm:w-full","md:w-fit",3,"ngClass"],[3,"classList"],["class","w-3 h-3 ms-2 sm:ms-4 rtl:rotate-180","aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 12 10",4,"ngIf"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 12 10",1,"w-3","h-3","ms-2","sm:ms-4","rtl:rotate-180"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m7 9 4-4-4-4M1 9l4-4-4-4"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"ol",2),e.DNE(3,Ot,5,5,"li",3),e.k0s()(),e.j41(4,"div",4),e.DNE(5,Vt,0,0,"ng-template",5),e.k0s()()),2&i&&(e.R7$(3),e.Y8G("ngForOf",o.forms))},dependencies:[l.MD,l.YU,l.Sq,l.bT,h],encapsulation:2})}return n})();var N=u(6007);let Ut=(()=>{class n{transform(t,...i){if(0===t)return"0 B";const c=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,c)).toFixed(2))+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][c]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275pipe=e.EJ8({name:"appFileSize",type:n,pure:!0,standalone:!0})}return n})();const Xt=["inputFile"];function Pt(n,a){if(1&n&&e.nrm(0,"img",11),2&n){const t=e.XpG();e.Y8G("src",t.imgBase64,e.B4B)}}function Wt(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",12),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onClickInputWrapper())}),e.j41(1,"span",13),e.EFF(2,"Agregar imagen"),e.k0s()()}}function Jt(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",14)(1,"div",15),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.setImageToView(o))}),e.j41(2,"span",16),e.EFF(3),e.k0s(),e.j41(4,"span",17),e.EFF(5),e.nI1(6,"appFileSize"),e.k0s()(),e.j41(7,"button",18),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.deleteImage(o))}),e.nrm(8,"svg-icon",19),e.k0s()()}if(2&n){const t=a.$implicit;e.R7$(3),e.JRh(t.name),e.R7$(2),e.JRh(e.bMT(6,3,t.size)),e.R7$(3),e.Y8G("svgClass","h-6 w-6 text-red-500")}}let ee=(()=>{class n{constructor(){this.isDisabled=!1,this.cdr=(0,e.WQX)(e.gRc),this.imgBase64=null,this.files=null}ngOnInit(){this.cdr.detectChanges()}writeValue(t){this.files=t,t&&this.setImageToView(t[0]),this.cdr.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.isDisabled=t}changeValue(t){this.files=t,this.onTouched?.(),this.onChange?.(t),this.cdr.detectChanges()}onClickInputWrapper(){this.isDisabled||(this.inputFile.nativeElement.click(),this.cdr.detectChanges())}onChangeFile(t){const o=Array.from(t.target.files);o.length>0&&this.setImageToView(o[0]);const s=this.files?[...this.files,...o]:o;this.changeValue(s),this.cdr.detectChanges()}setImageToView(t){let i=new FileReader;i.readAsDataURL(t),i.onload=()=>{this.imgBase64=i.result},i.onloadend=()=>{this.cdr.detectChanges()}}deleteImage(t){this.files&&(this.files=this.files.filter(i=>i!==t),this.files.length>0&&this.setImageToView(this.files[0]),this.changeValue(this.files),this.imgBase64=null,this.cdr.detectChanges())}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-multiple-file-input"]],viewQuery:function(i,o){if(1&i&&e.GBs(Xt,5),2&i){let s;e.mGM(s=e.lsd())&&(o.inputFile=s.first)}},standalone:!0,features:[e.Jv_([{provide:r.kq,useExisting:(0,e.Rfq)(()=>n),multi:!0}]),e.aNF],decls:13,vars:4,consts:[["noImage",""],["inputFile",""],[1,"flex","w-full","flex-row","gap-2","flex-wrap","items-center","justify-center"],[1,"flex","flex-col","gap-2","items-center","justify-center",2,"min-width","200px","max-width","300px","height","300px","align-items","center","justify-content","center","display","flex"],["style","object-fit: cover; width: 100%; height: 100%;","alt","image","class","image",3,"src",4,"ngIf","ngIfElse"],[1,"w-full","flex","flex-col","gap-2"],["class"," w-full border border-muted rounded-md p-2 cursor-pointer flex flex-row justify-between ",4,"ngFor","ngForOf"],[1,"w-full","border","border-muted","rounded-md","p-2","cursor-pointer","flex","flex-row","justify-between",3,"click"],[1,"text-base","text-foreground","w-full"],["src","assets/icons/heroicons/outline/plus.svg",3,"svgClass"],["multiple","","type","file","name","file","hidden","",1,"file-input",3,"change"],["alt","image",1,"image",2,"object-fit","cover","width","100%","height","100%",3,"src"],[1,"border","border-muted","rounded-md","flex","flex-col","items-center","justify-center",2,"width","300px","height","300px",3,"click"],[1,"text-muted-foreground"],[1,"w-full","border","border-muted","rounded-md","p-2","cursor-pointer","flex","flex-row","justify-between"],[1,"w-full","flex","flex-col",3,"click"],[1,"text-xs","p-1","text-foreground"],[1,"text-xs","w-fit","rounded-md","p-1","border","border-red-600","text-red-600"],["type","button",1,"rounded-md","p-2","border","border-muted","hover:bg-gray-200",3,"click"],["src","assets/icons/heroicons/outline/delete.svg",3,"svgClass"]],template:function(i,o){if(1&i){const s=e.RV6();e.j41(0,"div",2)(1,"div",3),e.DNE(2,Pt,1,1,"img",4)(3,Wt,3,0,"ng-template",null,0,e.C5r),e.k0s(),e.j41(5,"div",5),e.DNE(6,Jt,9,5,"div",6),e.j41(7,"div",7),e.bIt("click",function(){return e.eBV(s),e.Njj(o.onClickInputWrapper())}),e.j41(8,"span",8),e.EFF(9," Agregar Archivo"),e.k0s(),e.nrm(10,"svg-icon",9),e.j41(11,"input",10,1),e.bIt("change",function(d){return e.eBV(s),e.Njj(o.onChangeFile(d))}),e.k0s()()()()}if(2&i){const s=e.sdS(4);e.R7$(2),e.Y8G("ngIf",o.imgBase64)("ngIfElse",s),e.R7$(4),e.Y8G("ngForOf",o.files),e.R7$(4),e.Y8G("svgClass","h-6 w-6 text-foreground")}},dependencies:[l.MD,l.Sq,l.bT,j.DM,Ut],styles:[".wrapper[_ngcontent-%COMP%]{width:100%;border-radius:.375rem;border-width:1px;border-color:hsl(var(--border));background-color:hsl(var(--background));padding:.75rem;font-size:.75rem;line-height:1rem;color:hsl(var(--foreground))}.wrapper[_ngcontent-%COMP%]::placeholder{color:hsl(var(--muted-foreground))}.wrapper[_ngcontent-%COMP%]:focus{z-index:10;border-color:hsl(var(--primary));outline:2px solid transparent;outline-offset:2px;--tw-ring-color: hsl(var(--primary))}header[_ngcontent-%COMP%]{text-align:center}section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-bottom:10px;list-style:none;padding:15px 20px;border-radius:5px;display:flex;align-items:center;justify-content:space-between}section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px}section[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}"]})}return n})(),Qt=(()=>{class n{constructor(){this.coverageForm=new r.gE({id:new r.MJ,title:new r.MJ,description:new r.MJ,previousFiles:new r.MJ,files:new r.MJ})}ngAfterViewInit(){var t=this;return(0,O.A)(function*(){const i=t.coverage.files;console.log({files:i});const o=yield Promise.all(i.map(s=>Q(s,s.split("/").pop()||"")));t.coverageForm=new r.gE({id:new r.MJ(t.coverage.id),title:new r.MJ(t.coverage.title),description:new r.MJ(t.coverage.description),previousFiles:new r.MJ(i),files:new r.MJ(o)})})()}ngOnInit(){}close(){this.detailListener.close()}onSubmit(){this.detailListener.submit(this.coverageForm)}onDelete(){this.detailListener.delete(this.coverage)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-detail-coverage"]],inputs:{detailListener:"detailListener",coverage:"coverage"},standalone:!0,features:[e.aNF],decls:31,vars:2,consts:[[1,"flex","w-screen","md:w-96","bg-background","h-full","overflow-auto","gap-2","px-3","flex-col","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted",3,"ngSubmit","formGroup"],[1,"sticky","top-0","flex","flex-col","bg-background"],[1,"flex","relative","flex-row","items-center","gap-2","py-3","justify-start"],[1,"text-lg","text-foreground"],["type","button",1,"absolute","cursor-pointer","right-0","inline-flex","w-fit","justify-center","rounded-md","bg-background","px-3","py-2","text-sm","font-semibold","text-foreground","shadow-sm","ring-1","ring-inset","ring-foreground","hover:bg-card","sm:mt-0","sm:w-fit",3,"click"],[1,"border-dashed","border-border"],[1,"flex","py-2","flex-col"],[1,"px-2","flex-col","flex","gap-2"],[1,"text-xs","text-muted-foreground"],["type","text","formControlName","title","placeholder","google"],["type","text","formControlName","description","placeholder","google"],["formControlName","files"],[1,"flex","py-2","flex-col","gap-2"],["type","submit",1,"bg-primary","text-white","rounded-md","p-2"],["type","button",1,"bg-red-500","text-white","rounded-md","p-2",3,"click"]],template:function(i,o){1&i&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(1,"div",1)(2,"div",2)(3,"span",3),e.EFF(4),e.k0s(),e.j41(5,"button",4),e.bIt("click",function(){return o.close()}),e.EFF(6," X "),e.k0s()(),e.nrm(7,"hr",5),e.k0s(),e.j41(8,"div",6)(9,"div",7)(10,"span",8),e.EFF(11,"Titulo"),e.k0s(),e.nrm(12,"input",9),e.k0s()(),e.nrm(13,"hr",5),e.j41(14,"div",6)(15,"div",7)(16,"span",8),e.EFF(17,"Descripcion"),e.k0s(),e.nrm(18,"input",10),e.k0s()(),e.nrm(19,"hr",5),e.j41(20,"div",6)(21,"div",7)(22,"span",8),e.EFF(23,"Archivos"),e.k0s(),e.nrm(24,"app-multiple-file-input",11),e.k0s()(),e.j41(25,"div",12)(26,"button",13),e.EFF(27," Guardar Cambios "),e.k0s(),e.nrm(28,"hr"),e.j41(29,"button",14),e.bIt("click",function(){return o.onDelete()}),e.EFF(30," Eliminar "),e.k0s()()()),2&i&&(e.Y8G("formGroup",o.coverageForm),e.R7$(4),e.JRh("Detalles de la cobertura"))},dependencies:[l.MD,ee,r.YN,r.qT,r.me,r.BC,r.cb,r.X1,r.j4,r.JD],encapsulation:2})}return n})(),ve=(()=>{class n{constructor(){this.validators=[]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-input-multiple-files"]],inputs:{formControl:"formControl",data:"data",validators:"validators"},standalone:!0,features:[e.aNF],decls:1,vars:1,consts:[[3,"formControl"]],template:function(i,o){1&i&&e.nrm(0,"app-multiple-file-input",0),2&i&&e.Y8G("formControl",o.formControl)},dependencies:[l.MD,ee,r.YN,r.BC,r.X1,r.l_],encapsulation:2})}return n})();function zt(n,a){}let Ht=(()=>{class n{constructor(){this.onShowItem=!1,this.coverageFacade=(0,e.WQX)(ge),this.modalService=(0,e.WQX)(U),this.dialogService=(0,e.WQX)(q),this.coverages$=this.coverageFacade.coverages,this.onLoading$=this.coverageFacade.statusAction,this.dialogNotifier=new G.B,this.detailListener={close:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},submit:t=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,this.dialogService.open({typeDialog:g.isAlert,data:{title:"Advertencia",description:"Estas seguro de realizar esta accion",icon:"assets/icons/heroicons/outline/exclamation.svg"},options:{withActions:!0,position:[f.center],withBackground:!0,colorIcon:"text-red-500"}}).subscribe(o=>{const{id:s,files:c,description:d,previousFiles:m,title:p}=t.value;this.coverageFacade.updateItem(s,p,d,m,c)})},cancel:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},delete:t=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,this.dialogService.open({typeDialog:g.isAlert,data:{title:"Advertencia",description:"Estas seguro de realizar esta accion",icon:"assets/icons/heroicons/outline/exclamation.svg"},options:{withActions:!0,position:[f.center],withBackground:!0,colorIcon:"text-red-500"}}).subscribe(o=>{this.coverageFacade.deleteItem(t)})}},(0,e.QZP)(()=>{switch(this.onLoading$()){case N.p.LOADING:this.dialogService.open({typeDialog:g.isLoading,listener:this.dialogNotifier,data:{title:"Cargando",description:"Espere un momento por favor",icon:"assets/icons/loading.svg"},options:{withActions:!1,withBackground:!0,position:[f.center],colorIcon:"text-primary"}});break;case N.p.SUCCESS:this.dialogNotifier.next(null);const i={typeDialog:g.isSuccess,data:{title:"Operacion Exitosa",description:"La operacion se ha completado con exito",icon:"assets/icons/heroicons/outline/check-badge.svg"},options:{withBackground:!1,position:[f.top,f.right],colorIcon:"text-green-500",timeToShow:(0,E.O)(2e3)}};this.dialogService.open(i);break;default:this.dialogNotifier.next(null)}})}ngAfterViewInit(){}ngOnInit(){}generateCoverageForm(){return{component:M,data:{title:"Agregar nueva cobertura",description:"Especificaciones necesarias de la cobertura a agregar"},dynamicFields:[{component:C,data:{placeholder:"Nueva cobertura",title:"Titulo"},fieldFormControl:new r.MJ("")},{component:C,data:{placeholder:"descripcion de la cobertura",title:"Descripcion"},fieldFormControl:new r.MJ("")}]}}generateFileForm(){return{component:M,data:{title:"Agregar archivos",description:"Agregue los archivos necesarios para la cobertura"},dynamicFields:[{component:ve,data:{placeholder:"Agregar archivos",title:"Archivos"},fieldFormControl:new r.MJ}]}}onAddCoverageToggle(){this.modalService.open(Yt,{title:"Agregar Cobertura",size:"sm",forms:[this.generateCoverageForm(),this.generateFileForm()],data:{},icon:"assets/icons/heroicons/outline/plus.svg",actions:[{action:k.Create,title:"Agregar"}]}).subscribe({next:t=>{const{Titulo:i,Descripcion:o,Archivos:s}=P(t);this.coverageFacade.addItem(i,o,s)},error:t=>{},complete:()=>{}})}onDetailCoverage(t){console.log({coverage:t});const i=this.dcWrapper.viewContainerRef;i.clear();const o=i.createComponent(Qt);o.instance.detailListener=this.detailListener,o.instance.coverage=t,this.onShowItem=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-coverages"]],viewQuery:function(i,o){if(1&i&&e.GBs(h,5),2&i){let s;e.mGM(s=e.lsd())&&(o.dcWrapper=s.first)}},standalone:!0,features:[e.aNF],decls:5,vars:3,consts:[[3,"classList"],[3,"onAddToggleAction"],[3,"onSelectCoverage","coverages"],["dcWrapper",""]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",0)(2,"app-coverages-header",1),e.bIt("onAddToggleAction",function(){return o.onAddCoverageToggle()}),e.k0s(),e.j41(3,"app-list-coverages",2),e.bIt("onSelectCoverage",function(c){return o.onDetailCoverage(c)}),e.k0s()(),e.DNE(4,zt,0,0,"ng-template",3),e.k0s()),2&i&&(e.Y8G("classList",o.onShowItem?"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-auto  h-full ":"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-hidden  h-full "),e.R7$(),e.Y8G("classList",o.onShowItem?" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-0 md:py-4":" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-4"),e.R7$(2),e.Y8G("coverages",o.coverages$()))},dependencies:[l.MD,Lt,Bt,h],encapsulation:2})}return n})();var te=function(n){return n[n.PERCENTUAL=1]="PERCENTUAL",n[n.FIXED=2]="FIXED",n}(te||{});let qt=(()=>{class n{transform(t,...i){switch(t){case te.PERCENTUAL:return"Porcentual";case te.FIXED:return"Fijo";default:return"No definido"}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275pipe=e.EJ8({name:"appTypeDiscount",type:n,pure:!0,standalone:!0})}return n})();const Kt=["item-list-discount",""];let Zt=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["","item-list-discount",""]],inputs:{discount:"discount"},standalone:!0,features:[e.aNF],attrs:Kt,decls:21,vars:7,consts:[[1,"py-3","pl-3","text-start"],[1,"pr-1"],[1,"text-sm","text-muted-foreground"],[1,"py-3","pl-3","text-right"]],template:function(i,o){1&i&&(e.j41(0,"td",0)(1,"div",1)(2,"span",2),e.EFF(3),e.k0s()()(),e.j41(4,"td",0)(5,"div",1)(6,"span",2),e.EFF(7),e.k0s()()(),e.j41(8,"td",0)(9,"div",1)(10,"span",2),e.EFF(11),e.nI1(12,"appTypeDiscount"),e.k0s()()(),e.j41(13,"td",0)(14,"div",1)(15,"span",2),e.EFF(16),e.k0s()()(),e.j41(17,"td",3)(18,"div",1)(19,"span",2),e.EFF(20),e.k0s()()()),2&i&&(e.R7$(3),e.JRh(o.discount.title),e.R7$(4),e.JRh(o.discount.amount),e.R7$(4),e.JRh(e.bMT(12,5,o.discount.type)),e.R7$(5),e.SpI(" ",o.discount.description," "),e.R7$(4),e.SpI(" ",o.discount.imagesUrl.length," "))},dependencies:[l.MD,qt],encapsulation:2})}return n})();function ei(n,a){if(1&n){const t=e.RV6();e.j41(0,"tr",15),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.onSelectTable(o))}),e.k0s()}2&n&&e.Y8G("discount",a.$implicit)}let ti=(()=>{class n{constructor(){this.discounts=[],this.ondiscountSelected=new e.bkB}onSelectTable(t){this.ondiscountSelected.emit(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-list-discounts"]],inputs:{discounts:"discounts"},outputs:{ondiscountSelected:"ondiscountSelected"},standalone:!0,features:[e.aNF],decls:27,vars:1,consts:[[1,"flex-col","rounded-lg","bg-background","px-8","py-8","sm:flex-row"],[1,"border-dashed","border-border"],[1,"w-full","flex","flex-col","p-2","gap-2"],[1,"flex","flex-row","items-center","justify-between","w-full"],[1,"w-1/2"],[1,"flex","flex-row","gap-2"],[1,"w-full"],[1,"text-muted-foreground","text-sm"],["type","text","placeholder","cobertura internacional",1,"w-full","border","border-border","rounded-lg","p-2"],[1,"relative","overflow-x-auto","p-2","h-72","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","overflow-auto","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted"],[1,"w-full","table-auto"],[1,"text-xs","uppercase","text-muted-foreground","sticky","top-0","bg-background"],[1,"py-3","text-left"],[1,"py-3","text-right"],["item-list-discount","","class","border-b border-dashed border-border hover:bg-card",3,"discount","click",4,"ngFor","ngForOf"],["item-list-discount","",1,"border-b","border-dashed","border-border","hover:bg-card",3,"click","discount"]],template:function(i,o){1&i&&(e.j41(0,"div",0),e.nrm(1,"hr",1),e.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),e.EFF(8,"Descuentos"),e.k0s(),e.nrm(9,"input",8),e.k0s()()()()(),e.nrm(10,"hr",1),e.j41(11,"div",9)(12,"table",10)(13,"thead",11)(14,"tr")(15,"th",12),e.EFF(16,"Titulo"),e.k0s(),e.j41(17,"th",12),e.EFF(18,"Monto"),e.k0s(),e.j41(19,"th",12),e.EFF(20,"Tipo"),e.k0s(),e.j41(21,"th",12),e.EFF(22,"Descripcion"),e.k0s(),e.j41(23,"th",13),e.EFF(24,"Archivos"),e.k0s()()(),e.j41(25,"tbody"),e.DNE(26,ei,1,1,"tr",14),e.k0s()()()()),2&i&&(e.R7$(26),e.Y8G("ngForOf",o.discounts))},dependencies:[l.MD,l.Sq,Zt],encapsulation:2})}return n})(),ii=(()=>{class n{constructor(){this.onAdd=new e.bkB}onAddToggle(){this.onAdd.emit()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-discounts-header"]],outputs:{onAdd:"onAdd"},standalone:!0,features:[e.aNF],decls:12,vars:0,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"],[1,"flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-medium","text-primary-foreground",3,"click"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"h3",2),e.EFF(3,"Descuentos"),e.k0s(),e.j41(4,"div",3)(5,"a",4),e.EFF(6,"Lista"),e.k0s(),e.j41(7,"span"),e.EFF(8," - Descuentos"),e.k0s()()(),e.j41(9,"div",5)(10,"button",6),e.bIt("click",function(){return o.onAddToggle()}),e.EFF(11," Agregar Descuento "),e.k0s()()())},dependencies:[l.MD],encapsulation:2})}return n})(),ni=(()=>{class n{constructor(){this.items=[{id:1,name:"Porcentual"},{id:2,name:"Fijo"}],this.discountForm=new r.gE({id:new r.MJ,title:new r.MJ,description:new r.MJ,previousFiles:new r.MJ,amount:new r.MJ,type:new r.MJ,files:new r.MJ})}ngAfterViewInit(){var t=this;return(0,O.A)(function*(){const i=t.discountEntity.imagesUrl,o=yield Promise.all(i.map(s=>Q(s,s.split("/").pop()||"")));t.discountForm=new r.gE({id:new r.MJ(t.discountEntity.discount_id),title:new r.MJ(t.discountEntity.title),description:new r.MJ(t.discountEntity.description),amount:new r.MJ(t.discountEntity.amount),type:new r.MJ(t.discountEntity.type),previousFiles:new r.MJ(i),files:new r.MJ(o)})})()}ngOnInit(){}close(){this.detailListener.close()}onSubmit(){this.detailListener.submit(this.discountForm)}onDelete(){this.detailListener.delete(this.discountEntity)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-detail-discount"]],inputs:{detailListener:"detailListener",discountEntity:"discountEntity"},standalone:!0,features:[e.aNF],decls:43,vars:3,consts:[[1,"flex","w-screen","md:w-96","bg-background","h-full","overflow-auto","gap-2","px-3","flex-col","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted",3,"ngSubmit","formGroup"],[1,"sticky","top-0","flex","flex-col","bg-background"],[1,"flex","relative","flex-row","items-center","gap-2","py-3","justify-start"],[1,"text-lg","text-foreground"],["type","button",1,"absolute","cursor-pointer","right-0","inline-flex","w-fit","justify-center","rounded-md","bg-background","px-3","py-2","text-sm","font-semibold","text-foreground","shadow-sm","ring-1","ring-inset","ring-foreground","hover:bg-card","sm:mt-0","sm:w-fit",3,"click"],[1,"border-dashed","border-border"],[1,"flex","py-2","flex-col"],[1,"px-2","flex-col","flex","gap-2"],[1,"text-xs","text-muted-foreground"],["type","text","formControlName","title","placeholder","google"],["type","text","formControlName","description","placeholder","google"],["type","text","formControlName","amount","placeholder","google"],["type","text","formControlName","type",3,"items"],["formControlName","files"],[1,"flex","py-2","flex-col","gap-2"],["type","submit",1,"bg-primary","text-white","rounded-md","p-2"],["type","button",1,"bg-red-500","text-white","rounded-md","p-2",3,"click"]],template:function(i,o){1&i&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(1,"div",1)(2,"div",2)(3,"span",3),e.EFF(4),e.k0s(),e.j41(5,"button",4),e.bIt("click",function(){return o.close()}),e.EFF(6," X "),e.k0s()(),e.nrm(7,"hr",5),e.k0s(),e.j41(8,"div",6)(9,"div",7)(10,"span",8),e.EFF(11,"Titulo"),e.k0s(),e.nrm(12,"input",9),e.k0s()(),e.nrm(13,"hr",5),e.j41(14,"div",6)(15,"div",7)(16,"span",8),e.EFF(17,"Descripcion"),e.k0s(),e.nrm(18,"input",10),e.k0s()(),e.nrm(19,"hr",5),e.j41(20,"div",6)(21,"div",7)(22,"span",8),e.EFF(23,"Monto"),e.k0s(),e.nrm(24,"input",11),e.k0s()(),e.nrm(25,"hr",5),e.j41(26,"div",6)(27,"div",7)(28,"span",8),e.EFF(29,"Tipo"),e.k0s(),e.nrm(30,"app-select",12),e.k0s()(),e.nrm(31,"hr",5),e.j41(32,"div",6)(33,"div",7)(34,"span",8),e.EFF(35,"Archivos"),e.k0s(),e.nrm(36,"app-multiple-file-input",13),e.k0s()(),e.j41(37,"div",14)(38,"button",15),e.EFF(39," Guardar Cambios "),e.k0s(),e.nrm(40,"hr"),e.j41(41,"button",16),e.bIt("click",function(){return o.onDelete()}),e.EFF(42," Eliminar "),e.k0s()()()),2&i&&(e.Y8G("formGroup",o.discountForm),e.R7$(4),e.JRh("Detalles del descuento"),e.R7$(26),e.Y8G("items",o.items))},dependencies:[l.MD,r.YN,r.qT,r.me,r.BC,r.cb,r.X1,r.j4,r.JD,ee,Y],encapsulation:2})}return n})();var oi=u(7966);class A{static#e=this.getSlices=(0,y.OD)(oi.N);static#t=this.getDiscounts=(0,y.Mz)([A.getSlices.discounts],a=>a);static#i=this.getDiscount=(0,y.Mz)([A.getSlices.discountById],a=>a);static#n=this.getStatus=(0,y.Mz)([A.getSlices.status],a=>a)}var W=u(1300);class ie{constructor(a,t,i,o,s){this.title=a,this.description=t,this.amount=i,this.type=o,this.images=s}static create(a){const{title:t,description:i,amount:o,type:s,images:c}=a;return t?i?o?s?c?[void 0,new ie(t,i,o,s,c)]:["Images is required",void 0]:["Type is required",void 0]:["Amount is required",void 0]:["Description is required",void 0]:["Title is required",void 0]}}class ne{constructor(a,t,i,o,s,c,d){this.discount_id=a,this.title=t,this.description=i,this.amount=o,this.type=s,this.previousFiles=c,this.files=d}static create(a){const{discountId:t,title:i,description:o,value:s,type:c,previousFiles:d,images:m}=a;return t?i?o?s?c?m?d?[void 0,new ne(t,i,o,s,c,d,m)]:["previousFiles is required",void 0]:["imagesUrl is required",void 0]:["discountType is required",void 0]:["discountAmount is required",void 0]:["discountDescription is required",void 0]:["discountTitle is required",void 0]:["discountId is required",void 0]}}let si=(()=>{class n{constructor(){this._store=(0,e.WQX)(y.il),this.statusAction=this._store.selectSignal(A.getStatus),this.discounts=this._store.selectSignal(A.getDiscounts),this._store.dispatch(new W.l.GetAll)}addItem(t){const{title:i,description:o,amount:s,type:c,images:d}=t;if(!i)throw new Error("Title is required");if(!o)throw new Error("Description is required");if(!s)throw new Error("Value is required");if(!c)throw new Error("Type is required");if(!d)throw new Error("Images is required");const m=d.map(b=>new L(b,b.name)),p=ie.create({title:i,description:o,amount:s,type:c,images:m});if(p[0])throw new Error(p[0]);this._store.dispatch(new W.l.Create(p[1]))}updateItem(t){const{discountId:i,title:o,description:s,value:c,type:d,previousFiles:m,images:p}=t;if(!i)throw new Error("DiscountId is required");if(!o)throw new Error("Title is required");if(!s)throw new Error("Description is required");if(!c)throw new Error("Value is required");if(!d)throw new Error("Type is required");if(!p)throw new Error("Images is required");if(!m)throw new Error("PreviousFiles is required");const b=p.map(_=>new L(_,_.name)),x={...t,images:b},w=ne.create(x);if(w[0])throw new Error(w[0]);this._store.dispatch(new W.l.Update(w[1]))}deleteItem(t){this._store.dispatch(new W.l.Delete(t.discount_id,t.imagesUrl))}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ri(n,a){1&n&&(e.qSk(),e.j41(0,"svg",9),e.nrm(1,"path",10),e.k0s())}function ai(n,a){if(1&n&&(e.j41(0,"li",6)(1,"span",7),e.EFF(2),e.k0s(),e.EFF(3),e.DNE(4,ri,2,0,"svg",8),e.k0s()),2&n){const t=a.$implicit,i=a.index,o=e.XpG();e.Y8G("ngClass",i==o.actualFormIndex?" text-primary ":i<o.actualFormIndex?"text-primary hidden md:flex":"text-muted-foreground hidden md:flex"),e.R7$(),e.Y8G("classList",i<=o.actualFormIndex?"flex items-center justify-center w-5 h-5 me-2 text-xs border border-primary rounded-full shrink-0 ":"flex items-center justify-center w-5 h-5 me-2 text-xs border border-foreground  rounded-full shrink-0"),e.R7$(),e.SpI(" ",i+1," "),e.R7$(),e.SpI(" ",t.data.title," "),e.R7$(),e.Y8G("ngIf",i+1<=o.forms.length-1)}}function li(n,a){}let ci=(()=>{class n{constructor(){this.onCreateModal=new e.bkB,this.actualFormIndex=0,this.forms=[],this.cdr=(0,e.WQX)(e.gRc)}ngOnInit(){}ngAfterViewInit(){const t=this.createModalListener();this.loadComponent(this.actualFormIndex),this.onCreateModal.emit(t),this.cdr.detectChanges()}loadComponent(t){const i=this.forms[t],o=this.dcWrapper.viewContainerRef;o.clear();const s=o.createComponent(i.component);s.instance.step=t,s.instance.fields=i.dynamicFields,s.instance.data=i.data,s.instance.renderForm()}createModalListener(){return{onNext:()=>this.nextStepForm(),onPrev:()=>this.prevStepForm()}}nextStepForm(){return this.actualFormIndex<this.forms.length-1&&this.actualFormIndex++,this.loadComponent(this.actualFormIndex),{actualForm:this.forms[this.actualFormIndex],actualStep:this.actualFormIndex}}prevStepForm(){return this.actualFormIndex>0&&this.actualFormIndex--,this.loadComponent(this.actualFormIndex),{actualForm:this.forms[this.actualFormIndex],actualStep:this.actualFormIndex}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-modal-discounts"]],viewQuery:function(i,o){if(1&i&&e.GBs(h,5),2&i){let s;e.mGM(s=e.lsd())&&(o.dcWrapper=s.first)}},inputs:{forms:"forms",data:"data"},standalone:!0,features:[e.aNF],decls:6,vars:1,consts:[[1,"flex","flex-col","gap-5","w-full"],[1,"flex","flex-col","md:flex-row","bg-background","justify-between","items-center"],[1,"flex","items-center","w-full","p-3","space-x-2","text-sm","font-medium","text-center","rounded-lg","shadow-sm","sm:text-base","sm:p-4","sm:space-x-4","rtl:space-x-reverse"],["class","flex items-center  font-bold h-10 sm:w-full md:w-fit ",3,"ngClass",4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-2","bg-background"],["dcWrapper",""],[1,"flex","items-center","font-bold","h-10","sm:w-full","md:w-fit",3,"ngClass"],[3,"classList"],["class","w-3 h-3 ms-2 sm:ms-4 rtl:rotate-180","aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 12 10",4,"ngIf"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 12 10",1,"w-3","h-3","ms-2","sm:ms-4","rtl:rotate-180"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m7 9 4-4-4-4M1 9l4-4-4-4"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"ol",2),e.DNE(3,ai,5,5,"li",3),e.k0s()(),e.j41(4,"div",4),e.DNE(5,li,0,0,"ng-template",5),e.k0s()()),2&i&&(e.R7$(3),e.Y8G("ngForOf",o.forms))},dependencies:[l.MD,l.YU,l.Sq,l.bT,h],encapsulation:2})}return n})();function di(n,a){}const ui=[{path:"",component:xe,children:[{path:"services",component:xt},{path:"links",component:Rt},{path:"coverages",component:Ht},{path:"discounts",component:(()=>{class n{ngOnInit(){}onAddDiscount(){this.modalService.open(ci,{title:"Agregar Cobertura",size:"sm",forms:[this.generateDiscountForm(),this.generateFileForm()],data:{},icon:"assets/icons/heroicons/outline/plus.svg",actions:[{action:k.Create,title:"Agregar"}]}).subscribe({next:t=>{const{Descripcion:i,Monto:o,Tipo:s,Titulo:c,Archivos:d}=P(t);this.facadeService.addItem({description:i,title:c,type:s,amount:o,images:d})},error:t=>{console.log({err:t})},complete:()=>{}})}generateDiscountForm(){return{component:M,data:{title:"Agregar nueva descuento",description:"Especificaciones necesarias del descuento a agregar"},dynamicFields:[{component:C,data:{placeholder:"Nueva descuento",title:"Titulo"},fieldFormControl:new r.MJ("")},{component:C,data:{placeholder:"descripcion de la cobertura",title:"Descripcion"},fieldFormControl:new r.MJ("")},{component:ue,data:{placeholder:"Nueva descuento",title:"Tipo",items:this.items},fieldFormControl:new r.MJ("")},{component:C,data:{placeholder:"Nueva descuento",title:"Monto"},fieldFormControl:new r.MJ("")}]}}generateFileForm(){return{component:M,data:{title:"Agregar archivos",description:"Agregue los archivos necesarios para la cobertura"},dynamicFields:[{component:ve,data:{placeholder:"Agregar archivos",title:"Archivos"},fieldFormControl:new r.MJ}]}}onDetailDiscount(t){const i=this.dcWrapper.viewContainerRef;i.clear();const o=i.createComponent(ni);o.instance.detailListener=this.detailListener,o.instance.discountEntity=t,this.onShowItem=!0}constructor(){this.onShowItem=!1,this.items=[{id:1,name:"Porcentual"},{id:2,name:"Fijo"}],this.facadeService=(0,e.WQX)(si),this.dialogService=(0,e.WQX)(q),this.modalService=(0,e.WQX)(U),this.discounts$=this.facadeService.discounts,this.onLoading$=this.facadeService.statusAction,this.dialogNotifier=new G.B,this.detailListener={close:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},submit:t=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,this.dialogService.open({typeDialog:g.isAlert,data:{title:"Advertencia",description:"Estas seguro de realizar esta accion",icon:"assets/icons/heroicons/outline/exclamation.svg"},options:{withActions:!0,position:[f.center],withBackground:!0,colorIcon:"text-red-500"}}).subscribe(o=>{console.log({form:t});const{amount:s,description:c,files:d,id:m,previousFiles:p,title:b,type:x}=t.value;this.facadeService.updateItem({discountId:m,description:c,title:b,type:x,value:s,images:d,previousFiles:p})})},delete:t=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,this.dialogService.open({typeDialog:g.isAlert,data:{title:"Advertencia",description:"Estas seguro de realizar esta accion",icon:"assets/icons/heroicons/outline/exclamation.svg"},options:{withActions:!0,position:[f.center],withBackground:!0,colorIcon:"text-red-500"}}).subscribe(o=>{this.facadeService.deleteItem(t)})},cancel:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1}},(0,e.QZP)(()=>{switch(this.onLoading$()){case N.p.LOADING:this.dialogService.open({typeDialog:g.isLoading,listener:this.dialogNotifier,data:{title:"Cargando",description:"Espere un momento por favor",icon:"assets/icons/loading.svg"},options:{withActions:!1,withBackground:!0,position:[f.center],colorIcon:"text-primary"}});break;case N.p.SUCCESS:this.dialogNotifier.next(null);const i={typeDialog:g.isSuccess,data:{title:"Operacion Exitosa",description:"La operacion se ha completado con exito",icon:"assets/icons/heroicons/outline/check-badge.svg"},options:{withBackground:!1,position:[f.top,f.right],colorIcon:"text-green-500",timeToShow:(0,E.O)(2e3)}};this.dialogService.open(i);break;default:this.dialogNotifier.next(null)}})}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-discounts"]],viewQuery:function(i,o){if(1&i&&e.GBs(h,5),2&i){let s;e.mGM(s=e.lsd())&&(o.dcWrapper=s.first)}},standalone:!0,features:[e.aNF],decls:5,vars:3,consts:[[3,"classList"],[3,"onAdd"],[3,"ondiscountSelected","discounts"],["dcWrapper",""]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",0)(2,"app-discounts-header",1),e.bIt("onAdd",function(){return o.onAddDiscount()}),e.k0s(),e.j41(3,"app-list-discounts",2),e.bIt("ondiscountSelected",function(c){return o.onDetailDiscount(c)}),e.k0s()(),e.DNE(4,di,0,0,"ng-template",3),e.k0s()),2&i&&(e.Y8G("classList",o.onShowItem?"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-auto  h-full ":"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-hidden  h-full "),e.R7$(),e.Y8G("classList",o.onShowItem?" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-0 md:py-4":" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-4"),e.R7$(2),e.Y8G("discounts",o.discounts$()))},dependencies:[l.MD,ti,ii,h],encapsulation:2})}return n})()},{path:"",redirectTo:"services",pathMatch:"full"}]},{path:"**",redirectTo:"errors/404"}];let mi=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.$C({type:n});static#i=this.\u0275inj=e.G2t({imports:[$.iI.forChild(ui),$.iI]})}return n})(),pi=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.$C({type:n});static#i=this.\u0275inj=e.G2t({imports:[mi]})}return n})()}}]);